<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>文学原型测试 | 灵魂手稿</title>
    
    <script src="https://fastly.jsdelivr.net/npm/react@18/umd/react.production.min.js"></script>
    <script src="https://fastly.jsdelivr.net/npm/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://fastly.jsdelivr.net/npm/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://fastly.jsdelivr.net/npm/chart.js"></script>
    <script src="https://fastly.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@200;500;700&display=swap" rel="stylesheet">

    <style>
        :root { --bg-color: #f2f0e9; --text-main: #3a3833; }
        body {
            font-family: 'Noto Serif SC', serif;
            background-color: var(--bg-color);
            color: var(--text-main);
            -webkit-font-smoothing: antialiased;
            margin: 0;
        }
        .animate-fade-in { animation: fadeIn 0.8s cubic-bezier(0.16, 1, 0.3, 1) forwards; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        
        .highlight-yellow { background: linear-gradient(180deg, rgba(255,255,255,0) 65%, #e8ed2a 65%); padding: 0 4px; }
        .vertical-text { writing-mode: vertical-rl; text-orientation: mixed; }
        
        .redeem-input {
            background: transparent; border: none; border-bottom: 1.5px solid #3a3833;
            outline: none; text-align: center; letter-spacing: 0.2em; transition: all 0.3s;
        }
        .redeem-input:focus { border-bottom: 2px solid #35afcb; }
        .shake { animation: shake 0.4s ease-in-out; }
        @keyframes shake { 0%, 100% { transform: translateX(0); } 25% { transform: translateX(-5px); } 75% { transform: translateX(5px); } }

        .abstract-node { transition: all 0.3s ease; cursor: pointer; }
        .abstract-node:hover { transform: scale(1.1); }
        ::-webkit-scrollbar { width: 0px; background: transparent; }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;

        const COLORS = {
            bg: "#f2f0e9", textMain: "#3a3833", textSecondary: "#6d6b64",
            accentYellow: "#e8ed2a", accentBlue: "#35afcb", accentGreen: "#a4c29b", border: "#dcd8cf"
        };

        // 定义 Icon 组件
        const Icon = ({ name, size = 24, className = "" }) => {
            const paths = {
                ChevronRight: "M9 18l6-6-6-6", 
                RefreshCw: "M23 4v6h-6M1 20v-6h6M3.51 9a9 9 0 0114.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0020.49 15",
                Quote: "M3 21c3 0 7-1 7-8V5c0-1.25-.75-2-2-2H3c-1.25 0-2 .75-2 2v7c0 1.25.75 2 2 2 0 4-1 6-2 6zm11 0c3 0 7-1 7-8V5c0-1.25-.75-2-2-2h-5c-1.25 0-2 .75-2 2v7c0 1.25.75 2 2 2 0 4-1 6-2 6z",
                ArrowLeft: "M19 12H5M12 19l-7-7 7-7", 
                ArrowRight: "M5 12h14M12 5l7 7-7 7",
                BookOpen: "M2 3h6a4 4 0 014 4v14a3 3 0 00-3-3H2z M22 3h-6a4 4 0 00-4 4v14a3 3 0 013-3h7z",
                Layers: "M12 2L2 7l10 5 10-5-10-5z M2 17l10 5 10-5 M2 12l10 5 10-5",
                Download: "M21 15v4a2 2 0 01-2 2H5a2 2 0 01-2-2v-4 M7 10l5 5 5-5 M12 15V3",
                Bookmark: "M19 21l-7-5-7 5V5a2 2 0 012-2h10a2 2 0 012 2z",
                History: "M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z",
                Compass: "M12 22a10 10 0 100-20 10 10 0 000 20zm0-10l4-4-4 4-4-4 4 4z",
                X: "M18 6L6 18M6 6l12 12"
            };
            return (
                <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
                    <path d={paths[name] || ""} />
                </svg>
            );
        };

        const WRITER_DATA = {
            "鲁迅": { theme: "#b91c1c", secondary: "#1a1a1a", sub: "黑暗深处的睁眼者", status: "启蒙者 / 骨相冷硬", tags: ["国民性解剖", "铁屋呐喊"], quote: "横眉冷对千夫指，俯首甘为孺子牛。", stats: [98, 50, 70, 50, 85], identity: "你在虚假的和平面前选择拆穿，哪怕真相令人不安。", bio: "中国现代文学的开山鼻祖。鲁迅以文字为投枪，解剖民族灵魂。他在冷峻的真实中，撕开了虚伪的温情面纱，在绝望中确立了‘睁眼看’的尊严。", motif: "铁屋之呐喊：即便必死也要觉醒，觉醒本身即是拯救。", anxiety: "害怕由于中庸的妥协而陷入精神的彻底麻木。", shadow: "极度的批判可能演化为对他人的不信任感。", longDesc: "你的人生是一场自我解剖。你拒绝修辞的矫饰，文字里流淌着的是更具痛感的生命。", books: [{title: "《呐喊》", author: "鲁迅", desc: "在铁屋子中发出的第一声呼唤。"}] },
            "张爱玲": { theme: "#4338ca", secondary: "#1e1b4b", sub: "华丽废墟的守望者", status: "洞察者 / 苍凉底色", tags: ["海派传奇", "世俗物哀"], quote: "生命是一袭华丽的袍，爬满了蚤子。", stats: [50, 95, 45, 65, 55], identity: "你在琐碎日常的折痕里看穿命运。你在繁华中捕捉腐朽。", bio: "现代文学史上最不可忽视的异类。她在华丽中捕捉腐朽，在繁华中看穿幻灭。张爱玲专攻人性深处的自私与尴尬，将世俗悲剧写到了极致。", motif: "华丽袍子上的虱子：美与丑在苍凉底色下达成凄凉共振。", anxiety: "害怕在时间的荒野里被世界彻底抛弃。", shadow: "过度的苍凉感使你的人生显得极其疏离。", longDesc: "你在琐碎和平庸中发现宿命的荒诞。拒绝宏大叙事，只在时间的折痕里捕捉华丽的腐朽。", books: [{title: "《传奇》", author: "张爱玲", desc: "在旧梦中寻找真实。"}] },
            "王小波": { theme: "#1d4ed8", secondary: "#1e3a8a", sub: "智性趣味的自由者", status: "理侠 / 智性趣味", tags: ["反抗愚昧", "逻辑美学"], quote: "一个人只拥有此生此世是不够的。", stats: [88, 98, 65, 90, 75], identity: "你用逻辑消解崇高，认为有趣是人作为主体的底线。", bio: "当代文坛最独特的自由主义者。他将诗意与逻辑融合，以漫不经心的姿态解构权教条。在他看来，‘有趣’是独立主体最重要的防线。", motif: "诗意世界之反抗：智性的趣味比崇高的口号更具救赎力量。", anxiety: "害怕由于规则的愚昧而丧失个人精神的自主性。", shadow: "智性的优越感有时会演变为对他人的冷嘲。", longDesc: "你拒绝任何形式的愚昧。你在荒谬中保持着诚实的幽默感，致力于在无趣的世界里开辟自由疆域。", books: [{title: "《黄金时代》", author: "王小波", desc: "浪漫主义与逻辑的奇妙结合。"}] },
            "沈从文": { theme: "#0891b2", secondary: "#164e63", sub: "流水与人性的纪录者", status: "造梦人 / 自然原力", tags: ["湘西神话", "人性本真"], quote: "我爱过一个正当最好年龄的人。", stats: [50, 60, 85, 95, 45], identity: "你在物质文明的噪音中退守河边，礼赞原始人性。", bio: "来自湘西凤凰的文学赤子。他用白描的笔法构建了一个未经污染的人性圣殿。在都市喧嚣外，礼赞原始生命力的纯粹与哀伤。", motif: "自然法则高于社会逻辑：流水带走野花，藏着宇宙最丰饶的真相。", anxiety: "害怕由于都市文明的入侵而丧失人性的纯粹。", shadow: "过度的自然主义可能导致对现实残酷性的消解。", longDesc: "你迷恋自然的纯粹。你认为文学不应只有斗争，还应有对情感自然的敬畏与描摹。", books: [{title: "《边城》", author: "沈从文", desc: "在湘西烟雨中寻找纯净人性。"}] },
            "史铁生": { theme: "#4b5563", secondary: "#111827", sub: "生命局限的静思者", status: "静思者 / 灵魂突围", tags: ["地坛哲思", "死亡契约"], quote: "死是一个必然会降临的节日。", stats: [80, 90, 60, 50, 98], identity: "你在废墟上思考生存，在精神上完成了对肉身的突围。", bio: "在地坛的残垣断壁间，他完成了对存在局限的终极追问。史铁生是在用病弱躯壳与死神博弈，并在精神上完成了辉煌突围。", motif: "死是一个必然的节日：在必然的局限中，创造出无限宽广的精神空间。", anxiety: "害怕由于身体的残缺而丧失与世界连接的可能。", shadow: "深度的哲思有时会带有一种沉重的宗教仪式感。", longDesc: "你承认肉身的局限。你与死亡达成默契，获得了生的宁静。文学是对生命意义的终极追问。", books: [{title: "《我与地坛》", author: "史铁生", desc: "关于生命意义的终极追问。"}] },
            "萧红": { theme: "#7c3aed", secondary: "#4c1d95", sub: "呼兰河畔的漂泊灵性", status: "漂泊者 / 野生灵性", tags: ["东北荒野", "洛神遗风"], quote: "那是呼兰河传，那是我的小城故事。", stats: [75, 50, 85, 98, 65], identity: "你有野生的直觉，在荒凉岁月里记录孤独与灵性。", bio: "被誉为‘文学洛神’的天才女性。她的一生是一场仓皇的迁徙，文字是对这迁徙阵痛最敏锐的捕捉。生命粗砺如泥，却透着神辉。", motif: "生死场上的颤动：人类卑微且顽强地生灭，原始野性是文学本质。", anxiety: "害怕被由于某种定居的状态而丧失灵魂的野性。", shadow: "过度的漂泊感可能使人生在现实层面无法落脚。", longDesc: "你在荒凉的岁月里行走。生命如同一场没有终点的迁徙。你的文字充满了原始的战栗感。", books: [{title: "《呼兰河传》", author: "萧红", desc: "用灵性的笔调勾勒生命长卷。"}] },
            "曹雪芹": { theme: "#ca8a04", secondary: "#713f12", sub: "大观园的织梦人", status: "织梦人 / 繁华幻灭", tags: ["红楼梦", "东方挽歌"], quote: "质本洁来还洁去，强于污淖陷渠沟。", stats: [40, 75, 55, 45, 98], identity: "你洞穿了万物的覆灭，却依然沉醉于记录那一抹华丽。", bio: "中国古典文学终极高峰。他在幻梦中预演文明覆灭，实现了从世俗说书到生命美学总结的伟大质变，写就关于‘美’的永恒祭奠。", motif: "质本洁来还洁去：在必将到来的崩坏前，记录那一抹瞬间华丽。", anxiety: "害怕极致的美在俗世的权力争夺中瞬间消亡。", shadow: "透彻的宿命感容易使人生陷入虚无的终局。", longDesc: "你在字里行间构建幻梦。你坚信美是这个荒唐世界唯一的救赎。", books: [{title: "《红楼梦》", author: "曹雪芹", desc: "东方美学的集大成之作。"}] },
            "杨绛": { theme: "#166534", secondary: "#064e3b", sub: "洗净铅华的观察家", status: "观察家 / 洁白克制", tags: ["洗炼文风", "生命智慧"], quote: "我们仨，就剩下我一个了。", stats: [35, 92, 45, 55, 90], identity: "你在平淡中见真意，力量源于内心的安静与坚韧。", bio: "文坛最宁静的女性声音。在经历世纪波澜后，用最洁白的笔触记录温润情感。文字没有多余盐分，却饱含生命智慧。", motif: "洗净铅华见真意：在喧嚣边缘守住灯火与书卷，是对时代最温柔的反抗。", anxiety: "害怕过于外向的喧嚣破坏了内心的专注。", shadow: "过度的克制显得对外部冲突缺乏热量。", longDesc: "你在经历了世纪动荡后选择克制。文字是记录温度的日记。", books: [{title: "《我们仨》", author: "杨绛", desc: "极简文字下的深情力量。"}] },
            "林徽因": { theme: "#be185d", secondary: "#701a75", sub: "纯净审美的构建者", status: "建筑师 / 纯净审美", tags: ["现代派诗歌", "理性结构"], quote: "你是人间的四月天，笑响点亮了四面风。", stats: [35, 75, 50, 55, 95], identity: "你在理性的建筑与感性的诗歌间寻找高贵的平衡。", bio: "动荡时代的建筑师与诗人。用理性框架支撑起感性审美圣殿。追求词藻纯净与精神轻盈，是混乱时代的一抹微光。", motif: "废墟上的优雅：审美是人最后的尊严，用优雅构建内心理想国。", anxiety: "害怕外部战乱与动荡毁灭了内心的圣殿。", shadow: "对纯净的追求使你无法直视现实的脓疮。", longDesc: "你守护着审美，认为那是最后的尊严。你在动荡中寻求秩序。", books: [{title: "《你是人间的四月天》", author: "林徽因", desc: "在理性与感性之间捕捉理想。"}] },
            "三毛": { theme: "#ea580c", secondary: "#7c2d12", sub: "流浪的存在主义者", status: "实验员 / 浪漫流浪", tags: ["撒哈拉往事", "远方自我"], quote: "如果你给我的，和你给别人的一样，那我就不要了。", stats: [88, 45, 75, 98, 65], identity: "你将生命过成实验，在不断的行走中去发明自我。", bio: "拒绝被任何社会角色定义。她在行走中发明了‘真我’。文字是狂风、是黄沙、是烈火，唤醒整整一代人对远方的渴望。", motif: "身份在路上创造：自由是灵魂唯一的燃料，拒绝平庸的定居。", anxiety: "害怕被任何人定义，害怕任何形式的安稳定居。", shadow: "极致的自我中心导致与真实社会的脱节。", longDesc: "你拒绝平庸。你的文字带有异域的狂风。你在远方寻找自己的姓名。", books: [{title: "《撒哈拉的故事》", author: "三毛", desc: "对自由最赤裸的呼唤。"}] },
            "钱钟书": { theme: "#0f766e", secondary: "#134e4a", sub: "围城外的冷眼审视者", status: "冷眼人 / 智性巅峰", tags: ["博通中外", "围城困局"], quote: "城外的人想冲进去，城里的人想出来。", stats: [40, 98, 35, 85, 60], identity: "你追求绝对智性，对文明的尴尬有着精准的解剖。", bio: "现代学人小说巅峰。以博通中外视野俯视众生，对人类文明的‘尴尬’有着毒舌般的精准洞察。文字是场智力盛宴。", motif: "围城的死循环：城内外的人相互观望，这种结构性荒谬是人类的宿命。", anxiety: "害怕由于过于博学陷入无法行动的‘书斋困局’。", shadow: "毒舌的快感可能掩盖了对生命温度的感知。", longDesc: "你享受博学的孤独。文学是智力博弈的游乐场，是对知识分子的反讽。", books: [{title: "《围城》", author: "钱钟书", desc: "智性叙事的巅峰。"}] },
            "丁玲": { theme: "#15803d", secondary: "#064e3b", sub: "时代漩涡中的抉择者", status: "抉择者 / 时代激荡", tags: ["女性主体", "自我解放"], quote: "人，只要有一种信念，有所追求，就能忍受。", stats: [92, 65, 55, 50, 95], identity: "你敢于在冲突中直面自我，在历史阵痛中挣扎进化。", bio: "剧烈挣扎的先锋女性。人生是一次次剧烈重组，文字展现了强韧主体性，在时代漩涡中寻找真实的自我。", motif: "信念的韧度：自我解放不是目的，而是投身宏大进程的起点。", anxiety: "害怕由于过于关注小我而丧失对正义的参与。", shadow: "时代的狂热可能在某些瞬间掩盖了个体真实。", longDesc: "你是投身的火，也是灼烧的铁。展现了极强韧的生命力。", books: [{title: "《太阳照在桑干河上》", author: "丁玲", desc: "宏大进程中的个体阵痛。"}] },
            "王安忆": { theme: "#be185d", secondary: "#701a75", sub: "城市日常的织梦人", status: "织梦人 / 城市肌理", tags: ["海派传人", "弄堂逻辑"], quote: "在繁华的尘埃里，寻找人世的逻辑。", stats: [45, 90, 75, 55, 80], identity: "你迷恋细枝末节的厚度，在喧嚣中编织情感逻辑。", bio: "文坛最具耐性的工笔画家。在弄堂细碎逻辑中缝制史诗，探讨城市精神在不同历史周期中的延续与断裂，具有极具世俗厚度的民间史感。", motif: "寻找人世的逻辑：城市的灵魂藏在琐碎至极的生存博弈中。", anxiety: "害怕城市精神在商业化洪流中丧失逻辑感。", shadow: "过于绵密的细节描写消解了叙事爆发力。", longDesc: "你认为文学是工笔画。在弄堂里绣出史诗，重塑了城市的叙事逻辑。", books: [{title: "《长恨歌》", author: "王安忆", desc: "上海弄堂里的情感史诗。"}] },
            "残雪": { theme: "#581c87", secondary: "#2e1065", sub: "潜意识的实验员", status: "梦游者 / 潜意识深渊", tags: ["先锋极致", "异化噩梦"], quote: "在极致的纯粹中，寻找灵魂的出口。", stats: [98, 45, 98, 85, 75], identity: "你拒绝与外部现实和解，专攻内部世界的异化感。", bio: "中国先锋文学中最顽强的存在。彻底切断外部现实反映论，专攻内部异化与噩梦，是文学中最令人战栗的异类。", motif: "潜意识的故乡：现实只是影子，文字是通向黑暗唯一的出口。", anxiety: "害怕外界频繁的接触干扰了梦境的纯粹。", shadow: "彻底的自我封闭使文字充满了战栗的孤独。", longDesc: "你的文字是通向内部深渊的秘径。你是文学中最尖锐的异类。", books: [{title: "《黄泥街》", author: "残雪", desc: "开启东方先锋文学的奇诡梦境。"}] },
            "迟子建": { theme: "#0369a1", secondary: "#082f49", sub: "冰雪大地的守火者", status: "守火者 / 自然悲悯", tags: ["黑土地", "温情现实"], quote: "在寒冷的北方，灵魂也会开出温暖的花。", stats: [40, 70, 88, 92, 85], identity: "你坚信自然的法则高于社会，在极寒中守望温存。", bio: "扎根冰雪大地的守火人。用神性笔触记录少数民族兴衰。文字如冬夜油灯，散发出阔大且悲悯的自然精神。", motif: "自然法则的神圣：严寒中守望最后的人性善良，是生命对土地的告白。", anxiety: "害怕古老的自然文明被现代铁骑踏碎。", shadow: "过度的怀旧色有时美化了边缘文明苦难。", longDesc: "你扎根北方边缘。文学是漫长冬夜里的一盏油灯。", books: [{title: "《额尔古纳河右岸》", author: "迟子建", desc: "对古老文明的绝美挽歌。" }] },
            "舒婷": { theme: "#e11d48", secondary: "#881337", sub: "独立与温柔的诗人", status: "诗人 / 独立风骨", tags: ["朦胧诗", "感性宣言"], quote: "我必须是你近旁的一株木棉。", stats: [45, 65, 88, 75, 85], identity: "你拥有一种充满力量的温柔。强调自我的独立与平视。", bio: "朦胧诗派核心。在理性复苏的80年代，确立了女性平等的感性宣言。文字既有女性柔韧，又有思想骨气。", motif: "拒绝攀附的共鸣：我必须是你近旁的一株木棉，作为树的形象和你站在一起。", anxiety: "害怕过度情感投入丧失了个体自主性。", shadow: "理性的追求使某些瞬间显得过于清醒。", longDesc: "文学是对人格自主的宣誓，也是生命深情的赞歌。", books: [{title: "《致橡树》", author: "舒婷", desc: "当代情感独立精神的圣经。" }] },
            "莫言": { theme: "#991b1b", secondary: "#450a0a", sub: "民间幻象的通灵者", status: "通灵者 / 大地幻象", tags: ["魔幻现实", "高密原力"], quote: "生死疲劳，从荒原到幻象。", stats: [85, 55, 95, 65, 80], identity: "你将民间的粗砺升华为绚烂幻觉。文字带有腥味。", bio: "文坛最具爆发力的想象者。将民间荒诞编织成魔幻现实。文字带有泥土腥味与历史挑衅，挖掘被格式化的生命元神。", motif: "轮回的幻象：权力的宏大叙事下，大地的欲望与牺牲才是永恒。", anxiety: "害怕土地最原始的生命力被现代格式化。", shadow: "血腥与狂想交织可能使感官过载。", longDesc: "挖掘历史最原始的生命力，重构民族的苦难叙事。", books: [{title: "《生死疲劳》", author: "莫言", desc: "东方魔幻现实主义巅峰。"}] },
            "余华": { theme: "#1e293b", secondary: "#020617", sub: "苦难底色的生存者", status: "见证者 / 生存底色", tags: ["苦难叙事", "活着意志"], quote: "活着，活着本身就是唯一的理由。", stats: [75, 85, 50, 60, 98], identity: "你剥离感伤，认为苦难面前唯一的尊严就是忍受。", bio: "剥离感伤书写苦难。揭示生命最原始本能——忍受。‘活着’不再是动词，而是一座沉重庄严的山。", motif: "活着本身即理由：剥离理想后，那个在苦难中耕耘的影子才是真实。", anxiety: "害怕生存的匮乏丧失人的基本属性。", shadow: "冷静到近乎麻木的视角显得冷酷无情。", longDesc: "更关注在那之上的“活着”，那是本能的胜利。", books: [{title: "《活着》", author: "余华", desc: "生存意志的最强音。"}] },
            "金庸": { theme: "#854d0e", secondary: "#451a03", sub: "江湖秩序的重构者", status: "守望者 / 古典大义", tags: ["成人童话", "家国情怀"], quote: "侠之大者，为国为民。", stats: [75, 65, 55, 75, 92], identity: "你在成人世界编织童话。你不仅记录传奇。", bio: "新派武侠宗师。将通俗文学提升至历史反思高度。为现代人构建了侠义道德乌托邦，保留了古典风骨。", motif: "知其不可而为之：在权力阴谋的江湖中，个体的选择应基于道义责任。", anxiety: "害怕传统侠义精神在现代功利主义面前崩塌。", shadow: "宏大的道德叙事可能忽视了人性的自私。", longDesc: "你在为社会提供另一种想象，文学是浪漫主义的最后阵地。", books: [{title: "《射雕英雄传》", author: "金庸", desc: "侠义精神的现代图腾。"}] },
            "老舍": { theme: "#92400e", secondary: "#451a03", sub: "平民脊梁的守望者", status: "守望者 / 平民脊梁", tags: ["北京地域", "市民宿命"], quote: "活着，这就是生活。", stats: [65, 70, 60, 55, 85], identity: "你扎根大地。你对平凡人的尊严持有深刻的同情。", bio: "京派巨匠。扎根胡同尘土，写出民族魂魄史诗。在市民阶层幽默下，深藏对传统文明崩塌的悲痛。", motif: "体面生活的脆弱：文明的消失，往往始于平凡人的无声崩裂。", anxiety: "害怕时代的剧变导致文明根基断裂。", shadow: "对故土的依恋转化为某种保守的忧伤。", longDesc: "你在幽默的外壳下记录平民尊严。记录正在消失的文明。", books: [{title: "《四世同堂》", author: "老舍", desc: "民族魂魄的微观史诗。"}] }
        };

        const QUESTIONS = [
            { id: 1, text: "从昏沉中睁眼，你赤脚坐在被焊死的铁屋中央。周围同类睡得正沉，鼾声麻木，氧气贪婪耗尽。你会：", source: "—— 取材自 鲁迅《呐喊·自序》", options: [
                { text: "拼尽最后的气力呐喊，哪怕惊醒的人将面临更绝望的清醒。", target: "鲁迅" },
                { text: "盘腿坐下，冷静计算氧气耗竭的秒数，对这种集体宿命感到冷幽默。", target: "钱钟书" },
                { text: "摸索出碳笔，在铁壁描摹一朵凋零的莲花，试图用美去驯服死亡。", target: "林徽因" },
                { text: "闭目凝神，让灵魂在瞬息间飞离地表，留下这具无用的空壳。", target: "三毛" }
            ]},
            { id: 2, text: "湘西黄昏，你守着渡船。河水静谧得让人心慌，许诺出现的人始终未现，野花随波无声飘远。你会：", source: "—— 取材自 沈从文《边城》", options: [
                { text: "对着雾气哼起歌谣，坚信这份“等不来”本身就是一种修行。", target: "舒婷" },
                { text: "觉得这流动的河、破船与夕阳，就是宇宙最丰饶的真相。", target: "沈从文" },
                { text: "在沙滩默默涂写，将孤独归类封存，筑起守望情感的围墙。", target: "杨绛" },
                { text: "感到腿部的麻木正在蔓延，但深知等待是生命交付的壮烈劳作。", target: "史铁生" }
            ]},
            { id: 3, text: "上海弄堂，月亮像发霉的丝绸。你身着磨损的旗袍，看着月光照进盛着残酒与烟灰的瓷杯。那一刻你觉得：", source: "—— 取材自 张爱玲《金锁记》", options: [
                { text: "点燃一支烟冷笑：所谓的繁华，不过是这华丽袍子上拼命爬动的蚤子。", target: "张爱玲" },
                { text: "被剧烈的宿命感击中，想为这残破的月光写一首时代的葬歌。", target: "曹雪芹" },
                { text: "撕开紧绷的盘扣，这弄堂是细密的网，你只想立刻跑向旷野。", target: "三毛" },
                { text: "握紧拳头，觉得颓废月色是毒药，文字应当化作刺穿虚伪的投枪。", target: "丁玲" }
            ]},
            { id: 4, text: "你坐在荒废百年的地坛，落叶死寂。你的双腿已无法行走。你会：", source: "—— 取材自 史铁生《我与地坛》", options: [
                { text: "承认死是一个必然降临的节日，平静地与这片荒废的时间达成和解。", target: "史铁生" },
                { text: "通过年轮的刻痕，解码宇宙那套超越个人肉身苦难的逻辑。", target: "王小波" },
                { text: "将园子的凄冷化作一首挽歌，记录下每一寸泥土在孤独里的颤动。", target: "萧红" },
                { text: "坚信只要思想还在雪地里游历，残破的躯壳就是通向万物神性的坐标。", target: "迟子建" }
            ]},
            { id: 5, text: "误入大观园。当所有人在欢笑时，你却被某种预感击中。你会：", source: "—— 取材自 曹雪芹《红楼梦》", options: [
                { text: "做一个清醒得近乎残酷的旁观者，冷眼看那白茫茫大地真干净。", target: "王安忆" },
                { text: "宁愿在最繁华的一刻化作轻烟，用自毁来守护那份不容玷污的纯净。", target: "曹雪芹" },
                { text: "做那个摔碎宝玉的疯子。我要看这虚假的秩序在瞬间崩塌。", target: "残雪" },
                { text: "毫不留恋地背起行囊离开园子，去大荒原做一株绝对自由的草。", target: "三毛" }
            ]},
            { id: 6, text: "时代洪流裹挟着所有人。你的姿态是：", source: "—— 参考 余华《活着》中的大背景", options: [
                { text: "逆流而上，哪怕注定粉身碎骨，也要在被吞噬前发出咆哮。", target: "莫言" },
                { text: "在岸边搭起简陋的书斋，冷静地记录洪流的流速与泥沙。", target: "钱钟书" },
                { text: "保持灵魂的湿润。在漂泊中寻找彼岸尚未被污染的微光。", target: "沈从文" },
                { text: "在水底构建属于自己的理想水晶宫，拒绝承认这浑浊现实的存在。", target: "林徽因" }
            ]},
            { id: 7, text: "极北冰雪大地上，人们在严寒中重复、贫穷地生活。你的反应是：", source: "—— 参考 迟子建 的黑土地叙事", options: [
                { text: "感到彻骨孤独，想把这一地鸡毛的生活写成荒凉的童话。", target: "萧红" },
                { text: "点燃愤怒的火把，想要烧掉这冻结千年的底层僵局。", target: "鲁迅" },
                { text: "在极寒中寻找那抹温润的善良光辉，给予生命一点暖意。", target: "迟子建" },
                { text: "像解剖医生，分析贫困与愚昧之间环环相扣的必然逻辑。", target: "余华" }
            ]},
            { id: 8, text: "递给你一瓶能忘却过去痛苦的药。喝下它，你会获得平庸的快乐。你会：", source: "—— 参考 钱钟书 对人性的智性解剖", options: [
                { text: "推开它。痛苦是确认我这个“主体”依然真实存在的唯一证据。", target: "史铁生" },
                { text: "倒掉它。没有了过去那些刺痛的记忆，我的智性拼图就不再完整了。", target: "杨绛" },
                { text: "只喝一半。留下美的部分，将那些丑陋伤痕交给时间去漂白。", target: "舒婷" },
                { text: "把它泼向大地。我此时此刻只需要自由的风和未知的远方。", target: "王小波" }
            ]},
            { id: 9, text: "由你定义“江湖”，那个世界应当是：", source: "—— 参考 金庸《射雕英雄传》的精神母题", options: [
                { text: "侠之大者，为国为民。一场知其不可而为之的英雄道义。", target: "金庸" },
                { text: "一场荒诞的文字游戏。在消解权力的同时彻底解构所谓的英雄。", target: "王小波" },
                { text: "烟雨朦胧的湘西江南。每个人心中那个永远柔软的原始故乡。", target: "沈从文" },
                { text: "变幻莫测的棋局。规则隐秘且冷酷，唯有洞察规律者胜出。", target: "钱钟书" }
            ]},
            { id: 10, text: "关于“围城”——城里人想冲出去，城外人想进来。你会：", source: "—— 取材自 钱钟书《围城》", options: [
                { text: "站在斑驳的城墙上发出智慧的嘲笑，看穿人性的尴尬。", target: "张爱玲" },
                { text: "用一辈子去拆掉这堵高墙。哪怕墙塌了，后面是另一座深渊。", target: "鲁迅" },
                { text: "在城门边种满木棉。让这种无奈也变得具有独立的姿态。", target: "舒婷" },
                { text: "不进也不出。我只在城外的荒原流浪，直到天黑透。", target: "三毛" }
            ]},
            { id: 11, text: "笔下的主角面临毫无意义的牺牲。你会赋予他怎样的状态？", source: "—— 参考 余华 笔下的生存意志", options: [
                { text: "一种野蛮的生命力。为了活着而硬生生扛下所有的苦难。", target: "余华" },
                { text: "一种智性优越感。在荒谬处境中寻找有趣逻辑的解构式幽默。", target: "王小波" },
                { text: "一种在平凡琐屑中突然捕捉到的、带有神性的人格尊严。", target: "老舍" },
                { text: "一种对权力的一次次绝望对抗，哪怕最终化为荒原上的幻象。", target: "莫言" }
            ]},
            { id: 12, text: "如果文字有气味，你希望你的书稿散发出哪种质感？", source: "—— 参考 杨绛、萧红等人的文字质感", options: [
                { text: "火药味与灰烬味：刚经历完一场刺穿黑暗的战斗。", target: "丁玲" },
                { text: "墨香与尘埃：在古老书堆里沉淀下来的安静味道。", target: "杨绛" },
                { text: "腊梅香：高傲、清冷且绝对纯净，不容玷污的味道。", target: "林徽因" },
                { text: "草木味：自由、潮湿、带着野性且永不停留的味道。", target: "萧红" }
            ]},
            { id: 13, text: "镜子里看到了死期。那一刻，你真实的反应是：", source: "—— 参考 史铁生 对死亡的豁达思考", options: [
                { text: "精确记录那个时间，在倒计时中以逻辑的方式完成收尾。", target: "钱钟书" },
                { text: "愤怒地打碎镜子：即便宿命已定，也要在碎片中完成最后狂舞。", target: "史铁生" },
                { text: "在镜面画满繁复花朵，用审美去覆盖那个残酷的真相。", target: "曹雪芹" },
                { text: "背对镜子继续前行：终点在哪里我不在乎，我在乎路。", target: "迟子建" }
            ]},
            { id: 14, text: "如果你被囚禁在地牢。在腐烂前，你会在墙上刻下：", source: "—— 参考 鲁迅 的不妥协精神", options: [
                { text: "一串坐标。指引后人找到通往真相的秘密暗道。", target: "王安忆" },
                { text: "一句诅咒。哪怕肉身腐朽，意志也要化作厉鬼纠缠不放。", target: "鲁迅" },
                { text: "一朵正在凋零的玫瑰。守护最后的一点高贵审美。", target: "林徽因" },
                { text: "“此地不留行”。记录灵魂曾停驻，但从未真正被锁住。", target: "三毛" }
            ]},
            { id: 15, text: "故事推向注定失败的结局。你通常会：", source: "—— 参考 曹雪芹《红楼梦》的幻灭结局", options: [
                { text: "让他正面迎接这种毁灭，在绝望中确立主体尊严。", target: "余华" },
                { text: "让他消失在漫天烟雾中。给读者留下绝美且幻灭的遗憾。", target: "曹雪芹" },
                { text: "细致解剖这一悲剧的因果链条。让失败本身成为教材。", target: "钱钟书" },
                { text: "对着虚无大笑。带着复仇性质去戏谑这个荒唐剧本。", target: "残雪" }
            ]},
            { id: 16, text: "对于名为“故乡”的地方，你心底最深处的感受倾向于：", source: "—— 参考 莫言 的高密东北乡叙事", options: [
                { text: "一个已经腐烂，但当我受伤时不得不回去疗伤的祭坛。", target: "莫言" },
                { text: "一幅泛黄的旧画卷。我偶尔想念它，但再也不想打开。", target: "老舍" },
                { text: "一张褪色的、比例错误的旧地图。我已找不到有效坐标。", target: "三毛" },
                { text: "一个用来反衬我现在精神自由度的、充满陈腐规则的参照物。", target: "王小波" }
            ]},
            { id: 17, text: "胜利的一刻，你内心升起的反思是：", source: "—— 参考 张爱玲 对宏大叙事的疏离", options: [
                { text: "由于洞察了胜利背后那种更深层次的荒谬与虚无，感到的寒意。", target: "张爱玲" },
                { text: "由于这场胜利必须付出的牺牲，而产生的神圣悲情。", target: "丁玲" },
                { text: "由于彻底摧毁了压迫性旧秩序，而感到的复仇色彩快慰。", target: "鲁迅" },
                { text: "终于达成了一次智性的、逻辑的闭环，感到的宁静。", target: "钱钟书" }
            ]},
            { id: 18, text: "如果你能拥有某种“文学魔法”，你最希望它是：", source: "—— 参考 曹雪芹 的艺术幻象", options: [
                { text: "能一眼看穿所有谎言背后的真相，并用文字将其公开化。", target: "杨绛" },
                { text: "能用笔尖让已经凋零的美好事物，真实地复活一秒钟。", target: "曹雪芹" },
                { text: "能让受压迫的灵魂瞬间觉醒，并产生一种不计后果的反抗。", target: "鲁迅" },
                { text: "能让我本人瞬间移动到任何一个没人认识我的异国他乡。", target: "三毛" }
            ]},
            { id: 19, text: "路边看到为了生存而低声下气的人，你会：", source: "—— 参考 丁玲 的社会注视", options: [
                { text: "愤怒于这个吃人系统的压迫，想要彻底砸烂它的冲动。", target: "丁玲" },
                { text: "深沉感慨“活着”本身就是隐喻，具有庄严的厚度。", target: "余华" },
                { text: "下意识地避开目光。因为过于粗糙的现实会擦伤我的审美体验。", target: "林徽因" },
                { text: "饶有兴致地观察他生存的策略与伪装，思考背后的逻辑。", target: "王安忆" }
            ]},
            { id: 20, text: "叙事中长久的沉默，你认为这沉默的质感应当是：", source: "—— 参考 林徽因 的诗意留白", options: [
                { text: "一段加密的电报，等待着理性的解码。", target: "杨绛" },
                { text: "深渊边缘的屏息，预示着英雄在坠落前最后的悲歌。", target: "史铁生" },
                { text: "即将引爆的炸弹。沉默只是为了更猛烈地反叛。", target: "丁玲" },
                { text: "爱人的一声叹息，语言无法承载的纯粹感性。", target: "林徽因" }
            ]},
            { id: 21, text: "主角站在荒原面对神灵沉默，他的回答是：", source: "—— 参考 三毛、金庸的终极抗争", options: [
                { text: "拔出残破的长剑，向苍穹发起一场必败的挑战。", target: "金庸" },
                { text: "笑出声。意识到所谓“神灵”不过是人类自造的伪命题。", target: "王小波" },
                { text: "转身走入沙漠，在那神不曾触及的沙丘中发明新真理。", target: "三毛" },
                { text: "用诗篇去填满神灵的空位，创造一个属于自我的瞬间。", target: "舒婷" }
            ]},
            { id: 22, text: "整个文字世界瞬间坍塌，只保留一个词，你留：", source: "—— 参考 鲁迅 对转折语气的偏爱", options: [
                { text: "“但是” —— 代表了永远的反抗、转折与不服从。", target: "鲁迅" },
                { text: "“因为” —— 守住了因果的底线，确保了理性的最后点。", target: "钱钟书" },
                { text: "“也许” —— 在审美的朦胧中保留余地，不至于太刺眼。", target: "残雪" },
                { text: "“再会” —— 预示下一场未知的启程。灵魂在迁徙路上。", target: "迟子建" }
            ]},
            { id: 23, text: "文学里的“风景”对你而言，最好的状态应当是哪一种？", source: "—— 参考 曹雪芹 笔下的意境设计", options: [
                { text: "布满荆棘的荒原。试炼英雄骨骼与意志的战道。", target: "史铁生" },
                { text: "由无数隐喻构成的迷雾森林。通往潜意识的线索。", target: "莫言" },
                { text: "半梦半醒间的江南烟雨。逃离粗糙现实唯一的避难所。", target: "曹雪芹" },
                { text: "遥远北极村的冰雪大地。守望最后一点人性的善良。", target: "迟子建" }
            ]},
            { id: 24, text: "面对厚重如山的传统文化，主角最可能的抉择是：", source: "—— 参考 钱钟书 对古典文化的博通解剖", options: [
                { text: "背负着这沉重的遗产。在艰难行走中，完成古典守望。", target: "老舍" },
                { text: "冷静地拆解它。将腐朽符号转化成现代叙事的砖石。", target: "钱钟书" },
                { text: "亲手烧毁它。只有在废墟之上，自由才有最广阔的操场。", target: "残雪" },
                { text: "美化它。在墨色与词藻中，重构一个从未存在的极致盛世。", target: "林徽因" }
            ]},
            { id: 25, text: "如果时间可以作为一种实体化的纸张：", source: "—— 参考 王安忆 对城市时间脉络的缝补", options: [
                { text: "编织一张庞大的网。将所有偶然网罗其中。", target: "王安忆" },
                { text: "刻下一道道见骨的划痕。记录对抗遗忘的真实伤疤。", target: "余华" },
                { text: "潦草、狂气的线条。随风飘向空白处。", target: "三毛" },
                { text: "刷上一层又一层半透明彩墨。构建一种虚幻的厚度感。", target: "残雪" }
            ]},
            { id: 26, text: "你倾向于让叙述者在文本中扮演哪种角色？", source: "—— 参考 王小波 的叙事语态", options: [
                { text: "绝对客观的旁观者。上帝般记录参数点，不带感情。", target: "钱钟书" },
                { text: "激情的参与者。每一个字都流淌着血与泪的冲突。", target: "鲁迅" },
                { text: "喃喃自语的梦游者，游走在现实与幻觉边缘。", target: "残雪" },
                { text: "不打招呼的闯入者。带着智性嘲弄，时刻准备冒犯读者。", target: "王小波" }
            ]},
            { id: 27, text: "面对“神秘主义”或“不可知论”，你的文学态度倾向于：", source: "—— 参考 鲁迅 对真相的逼视", options: [
                { text: "“神秘是审美的温床。一旦解释清楚了，美也就凋谢了。”", target: "林徽因" },
                { text: "“神秘只是理性的边疆。这层迷雾会被逻辑彻底穿透。”", target: "杨绛" },
                { text: "“神秘是真相的掩体。我们要用反叛逼它露出原形。”", target: "鲁迅" },
                { text: "“神秘是永远的地平线。我们追逐它，但从知从未抵达。”", target: "萧红" }
            ]},
            { id: 28, text: "必须为对手设计最终宿命，你希望他：", source: "—— 参考 余华 对苦难中主体尊严的映照", options: [
                { text: "拥有比我更坚定的反抗精神。甚至反过来审判我精神的软弱。", target: "鲁迅" },
                { text: "成为我智性的镜像。进行一场永无止境的博弈。", target: "王小波" },
                { text: "成为理想人格载体。替我在充满污垢的文字里救赎。", target: "林徽因" },
                { text: "成位命运最冷酷的对照组。在毁灭中映照出主体性尊严。", target: "余华" }
            ]},
            { id: 29, text: "文字在宇宙中最终的形态：", source: "—— 参考 残雪、杨绛的文学追求", options: [
                { text: "一把永不熄灭的火炬。点燃读者的同时也正在毁灭自己。", target: "鲁迅" },
                { text: "一个完美的圆环。首尾相接，逻辑自闭且神圣冷漠。", target: "杨绛" },
                { text: "一条无限延伸至地平线尽头的、极其模糊的直线。", target: "沈从文" },
                { text: "一片散落在虚空中、发光的羽毛。捕捉风的颤动。", target: "残雪" }
            ]},
            { id: 30, text: "最后，如果你可以掌握一种掌握虚构的力量，你会选择：", source: "—— 参考 莫言 对虚构本质的终极总结", options: [
                { text: "将苦难提炼成黄金。让那些被侮辱的人获得文学的加冕。", target: "莫言" },
                { text: "在日常的裂缝中挖出一口深井，去修补那破碎的现实。", target: "王安忆" },
                { text: "在空白处发明一个新的地心引力，让所有逻辑重新归位。", target: "钱钟书" },
                { text: "将整个世界缩减成一个书柜，而我拥有唯一的钥匙。", target: "杨绛" }
            ]}
        ];

        // 抽象符号组件
        const AbstractNode = ({ name, isActive, onClick }) => {
            return (
                <g className="abstract-node" onClick={onClick}>
                    <circle cx="20" cy="15" r="3.5" fill={isActive ? "#35afcb" : "#3a383344"} />
                    <path d="M20 18.5 Q22 28 18 38" stroke={isActive ? "#35afcb" : "#3a383344"} strokeWidth="2" fill="none" strokeLinecap="round" />
                    <path d="M19 25 L32 18" stroke={isActive ? "#35afcb" : "#3a383344"} strokeWidth="1.2" fill="none" strokeLinecap="round" />
                    <path d="M18 38 L10 48 L22 52" stroke={isActive ? "#35afcb" : "#3a383344"} strokeWidth="1.2" fill="none" strokeLinecap="round" />
                    <text x="20" y="65" textAnchor="middle" fontSize="9" fill={isActive ? "#3a3833" : "#3a383333"} fontWeight={isActive ? "bold" : "normal"}>{name}</text>
                </g>
            );
        };

        const LiteraryConstellation = ({ onSelect, activeName }) => {
            const radiusX = 140; const radiusY = 120;
            const centerX = 180; const centerY = 160;
            const masters = Object.keys(WRITER_DATA);

            return (
                <svg viewBox="0 0 360 320" className="w-full h-full drop-shadow-sm">
                    <ellipse cx={centerX} cy={centerY} rx={radiusX} ry={radiusY} fill="none" stroke="#3a3833" strokeWidth="0.5" strokeDasharray="4 4" opacity="0.1" />
                    <g transform="translate(130, 120)" opacity="0.08" style={{mixBlendMode: 'multiply'}}>
                        <path d="M10 40 Q 30 10 70 35 Q 90 60 50 80 Q 20 70 10 40" fill="#a4c29b" /><path d="M25 45 Q 45 15 85 40 Q 105 65 65 85" fill="#35afcb" />
                    </g>
                    {masters.map((name, i) => {
                        const angle = (i / masters.length) * Math.PI * 2 - Math.PI / 2;
                        const x = centerX + Math.cos(angle) * radiusX;
                        const y = centerY + Math.sin(angle) * radiusY;
                        return (
                            <g key={name} transform={`translate(${x - 20}, ${y - 30})`}>
                                <AbstractNode name={name} isActive={activeName === name} onClick={() => onSelect(name)} />
                            </g>
                        );
                    })}
                </svg>
            );
        };

        function App() {
            const [step, setStep] = useState('welcome');
            const [currentQuestion, setCurrentQuestion] = useState(0);
            const [scores, setScores] = useState({});
            const [history, setHistory] = useState([]);
            const [result, setResult] = useState(null);
            const [isSaving, setIsSaving] = useState(false);
            const [selectedWriter, setSelectedWriter] = useState("鲁迅");
            const [code, setCode] = useState("");
            const [showError, setShowError] = useState(false);
            
            const radarCanvas = useRef(null);
            const captureRef = useRef(null);
            const chartRef = useRef(null);

            const handleVerify = () => {
                if (code.toLowerCase().trim() === "qwert") setStep('quiz');
                else { setShowError(true); setTimeout(() => setShowError(false), 500); }
            };

            const handleAnswer = (target) => {
                const newScores = { ...scores, [target]: (scores[target] || 0) + 1 };
                setHistory([...history, { scores, currentQuestion }]);
                setScores(newScores);
                if (currentQuestion < 29) setCurrentQuestion(currentQuestion + 1);
                else {
                    const topWriterName = Object.keys(newScores).reduce((a, b) => (newScores[a] || 0) > (newScores[b] || 0) ? a : b);
                    setResult({ ...WRITER_DATA[topWriterName], name: topWriterName });
                    setStep('result');
                    window.scrollTo(0, 0);
                }
            };

            const handleBack = () => {
                if (history.length > 0) {
                    const last = history[history.length - 1];
                    setScores(last.scores); setCurrentQuestion(last.currentQuestion);
                    setHistory(history.slice(0, -1));
                } else setStep('welcome');
            };

            const handleRestart = () => {
                setStep('welcome'); setCurrentQuestion(0); setScores({}); setHistory([]); setResult(null); setCode("");
                window.scrollTo(0, 0);
            };

            const saveAsImage = async () => {
                if (typeof html2canvas === 'undefined') return;
                setIsSaving(true);
                try {
                    const canvas = await html2canvas(captureRef.current, { scale: 2, backgroundColor: "#f2f0e9", useCORS: true });
                    const link = document.createElement('a');
                    link.download = `灵魂手稿-${result.name}.png`;
                    link.href = canvas.toDataURL('image/png');
                    link.click();
                } catch (err) { console.error(err); }
                setIsSaving(false);
            };

            useEffect(() => {
                if (step === 'result' && result && radarCanvas.current) {
                    if (chartRef.current) chartRef.current.destroy();
                    const ctx = radarCanvas.current.getContext('2d');
                    chartRef.current = new Chart(ctx, {
                        type: 'radar',
                        data: {
                            labels: ['批判意识', '智性逻辑', '审美欲望', '自由意志', '精神强度'],
                            datasets: [{ data: result.stats, backgroundColor: `${result.theme}22`, borderColor: result.theme, borderWidth: 2, pointRadius: 0 }]
                        },
                        options: { scales: { r: { angleLines: { display: false }, grid: { color: 'rgba(0,0,0,0.05)' }, pointLabels: { font: { size: 9, family: 'Noto Serif SC', weight: 'bold' } }, ticks: { display: false }, min: 0, max: 100 } }, plugins: { legend: { display: false } } }
                    });
                }
            }, [step, result]);

            const dossier = WRITER_DATA[selectedWriter];

            return (
                <div className="max-w-xl mx-auto px-4 py-8 relative">
                    {step === 'welcome' && (
                        <div className="animate-fade-in text-center space-y-8">
                            <div className="flex justify-between items-start pt-4">
                                <div className="inline-block px-2 py-0.5 bg-[#3a3833] text-[#f2f0e9] text-[8px] tracking-widest font-sans uppercase">ARCHETYPE ARCHIVE</div>
                                <div className="text-[8px] opacity-30 font-bold uppercase tracking-widest">NO. 2026 / SYSTEM 01</div>
                            </div>
                            
                            <div className="text-left">
                                <h1 className="text-4xl md:text-5xl font-bold tracking-[0.1em] text-[#3a3833]">寻找你的<span className="highlight-yellow ml-2">文学原型</span></h1>
                                <p className="mt-4 text-[9px] text-gray-400 tracking-[0.4em] uppercase font-bold">DIALOGUE WITH 20 MASTERS</p>
                            </div>

                            <div className="w-full relative py-4">
                                <LiteraryConstellation onSelect={setSelectedWriter} activeName={selectedWriter} />
                                <div className="absolute top-[5%] right-0 bg-white px-3 py-1.5 rounded-sm shadow-xl border border-[#dcd8cf] transform rotate-3 max-w-[120px] z-20">
                                    <p className="text-[9px] text-[#3a3833] leading-tight font-bold italic">“点击名字，<br/>提取绝密档案。”</p>
                                </div>
                            </div>

                            <div className="border-t-2 border-[#3a3833] pt-8 text-left space-y-6">
                                <div className="flex justify-between items-end">
                                    <div className="space-y-1">
                                        <h2 className="text-4xl font-bold tracking-widest text-[#3a3833]">{selectedWriter}</h2>
                                        <p className="text-[10px] font-bold text-[#35afcb] uppercase tracking-[0.2em]">{dossier.status}</p>
                                    </div>
                                    <div className="flex gap-2">{dossier.tags.map(t => <span key={t} className="text-[8px] border border-[#dcd8cf] px-1.5 py-0.5 opacity-50 font-bold">#{t}</span>)}</div>
                                </div>
                                <div className="space-y-4">
                                    <p className="text-[12px] leading-[1.8] text-[#6d6b64] text-justify font-light">{dossier.bio}</p>
                                    <div className="space-y-1.5">
                                        <h4 className="text-[9px] font-bold uppercase tracking-widest opacity-30 flex items-center gap-2"><div className="w-3 h-[1px] bg-black"></div> 叙事母题 / MOTIF</h4>
                                        <p className="text-[12px] leading-relaxed text-[#3a3833] italic bg-white bg-opacity-50 p-3 border-l-2 border-[#e8ed2a]">{dossier.motif}</p>
                                    </div>
                                </div>
                            </div>

                            <div className="space-y-8 pt-8">
                                <div className={`space-y-4 ${showError ? 'shake' : ''}`}>
                                    <div className="flex flex-col items-center gap-2">
                                        <span className="text-[10px] uppercase tracking-[0.3em] opacity-40 font-bold">通行码认证 / ACCESS CODE</span>
                                        <input type="text" value={code} onChange={(e) => setCode(e.target.value)} className="redeem-input w-48 py-2 text-sm text-center" placeholder="请输入通行码解锁测试" />
                                    </div>
                                </div>
                                <button onClick={handleVerify} className="w-full py-7 bg-[#3a3833] text-white text-[12px] tracking-[0.8em] font-bold shadow-2xl active:scale-95 transition-all">开启漫游 / ENTER</button>
                                <div className="text-[10px] text-gray-400 tracking-[0.3em] pb-12">Curated by @云树cloudtree</div>
                            </div>
                        </div>
                    )}

                    {step === 'quiz' && (
                        <div className="animate-fade-in space-y-8 text-center">
                            <div className="flex justify-between items-center border-b border-[#dcd8cf] pb-4">
                                <button onClick={handleBack} className="flex items-center gap-1 text-[10px] uppercase opacity-40 hover:opacity-100 transition-all">BACK</button>
                                <span className="text-[9px] uppercase text-[#6d6b64] font-bold tracking-widest">Step {String(currentQuestion + 1).padStart(2, '0')} / 30</span>
                                <div className="w-10"></div>
                            </div>
                            <div className="min-h-[140px] flex flex-col items-center justify-center px-4 space-y-4">
                                <h2 className="text-[16px] md:text-[18px] font-normal leading-[1.8] text-[#3a3833] italic text-justify">{QUESTIONS[currentQuestion].text}</h2>
                                <p className="text-[10px] text-[#6d6b64] opacity-50 italic tracking-wider self-start">{QUESTIONS[currentQuestion].source}</p>
                            </div>
                            <div className="space-y-4 text-left">
                                {QUESTIONS[currentQuestion].options.map((option, idx) => (
                                    <button key={idx} onClick={() => handleAnswer(option.target)} className="w-full p-6 bg-white bg-opacity-70 rounded-[12px] border border-[#dcd8cf] hover:border-[#3a3833] transition-all group active:bg-white text-left">
                                        <span className="text-[14px] text-[#6d6b64] group-hover:text-[#3a3833] leading-relaxed pr-4">{option.text}</span>
                                    </button>
                                ))}
                            </div>
                            <div className="pt-10 flex justify-center"><div className="h-[0.5px] w-48 bg-[#dcd8cf] relative"><div className="h-full bg-[#3a3833] transition-all duration-700" style={{width: `${((currentQuestion+1)/30)*100}%`}}></div></div></div>
                        </div>
                    )}

                    {step === 'result' && result && (
                        <div className="animate-fade-in space-y-8 pb-12">
                            <div ref={captureRef} className="pb-12 bg-[#f2f0e9] overflow-hidden rounded-2xl result-card relative text-left">
                                <div className="p-12 text-center relative overflow-hidden" style={{ background: `linear-gradient(135deg, ${result.theme}, ${result.secondary})` }}>
                                    <div className="absolute top-0 left-0 w-full h-full opacity-10">
                                        <svg width="100%" height="100%" viewBox="0 0 100 100" preserveAspectRatio="none"><path d="M0,0 L100,0 L100,20 Q50,40 0,20 Z" fill="white" /><circle cx="90" cy="10" r="15" fill="white" /></svg>
                                    </div>
                                    <div className="relative z-10 space-y-6">
                                        <div className="flex justify-center mb-2"><div className="px-3 py-1 bg-white bg-opacity-20 text-white text-[8px] tracking-[0.5em] uppercase font-bold border border-white border-opacity-30 rounded-sm">Archive Manuscript No. {Math.floor(Math.random()*10000)}</div></div>
                                        <h2 className="text-5xl md:text-6xl font-bold text-white tracking-[0.2em] text-center">{result.name}</h2>
                                        <div className="space-y-4">
                                            <p className="text-sm text-white italic font-light tracking-[0.5em] opacity-90 text-center">{result.sub}</p>
                                            <div className="flex justify-center gap-3"><span className="px-4 py-1.5 bg-white text-[10px] font-bold uppercase tracking-widest rounded-full shadow-lg" style={{ color: result.theme }}>灵魂契合度 98%</span></div>
                                        </div>
                                    </div>
                                </div>

                                <div className="px-6 -mt-10 relative z-20">
                                    <div className="grid grid-cols-1 md:grid-cols-2 gap-6 bg-white p-8 border border-[#dcd8cf] rounded-3xl shadow-2xl items-center mb-8">
                                        <div className="space-y-4 text-left">
                                            <h4 className="text-[11px] font-bold border-b pb-2 text-[#3a3833] opacity-60 uppercase tracking-widest">基因分析 / ANALYSIS</h4>
                                            <div className="space-y-3 text-[10px]">
                                                <div className="flex justify-between items-center text-gray-400 uppercase"><span>批判意识</span><div className="w-24 h-1 bg-gray-100"><div className="h-full" style={{width: `${result.stats[0]}%`, backgroundColor: result.theme}}></div></div></div>
                                                <div className="flex justify-between items-center text-gray-400 uppercase"><span>智性逻辑</span><div className="w-24 h-1 bg-gray-100"><div className="h-full" style={{width: `${result.stats[1]}%`, backgroundColor: result.theme}}></div></div></div>
                                                <div className="flex justify-between items-center text-gray-400 uppercase"><span>审美欲望</span><div className="w-24 h-1 bg-gray-100"><div className="h-full" style={{width: `${result.stats[2]}%`, backgroundColor: result.theme}}></div></div></div>
                                            </div>
                                        </div>
                                        <div className="aspect-square w-full max-w-[180px] mx-auto"><canvas ref={radarCanvas}></canvas></div>
                                    </div>

                                    <div className="p-8 bg-white border border-[#dcd8cf] rounded-3xl shadow-sm mb-8 space-y-6 relative overflow-hidden text-left">
                                        <div className="flex items-center gap-3 border-b border-gray-50 pb-4"><Icon name="History" size={18} style={{ color: result.theme }} /><span className="text-[11px] font-bold uppercase tracking-[0.3em] text-[#3a3833] opacity-60">文学史回响 / CONTEXT</span></div>
                                        <p className="text-xs text-[#6d6b64] leading-[2.2] text-justify tracking-wide italic">{result.context}</p>
                                    </div>

                                    <div className="relative p-10 bg-white border border-[#dcd8cf] text-center rounded-3xl shadow-sm mb-8">
                                        <p className="text-xl md:text-2xl leading-[1.8] font-medium italic mb-6 text-center"><span className="highlight-yellow">“{result.quote}”</span></p>
                                        <div className="text-[10px] text-[#a4c29b] tracking-widest uppercase font-bold text-center">— {result.name} —</div>
                                    </div>

                                    <div className="space-y-10 px-2 text-left">
                                        <section className="space-y-4">
                                            <h4 className="text-[11px] font-bold uppercase tracking-[0.5em] border-b border-[#dcd8cf] pb-2 text-[#3a3833] opacity-60">精神原色 / THE SELF</h4>
                                            <div className="bg-white p-6 border-l-4 space-y-4" style={{ borderColor: result.theme }}>
                                                <p className="text-[13px] leading-relaxed text-[#6d6b64] italic">“{result.identity}”</p>
                                                <p className="text-[13px] leading-relaxed font-light">{result.longDesc}</p>
                                            </div>
                                        </section>

                                        <section className="space-y-4 text-left">
                                            <h4 className="text-[11px] font-bold uppercase tracking-[0.5em] border-b border-[#dcd8cf] pb-2 text-red-800 opacity-60">核心焦虑与盲区</h4>
                                            <div className="grid grid-cols-1 md:grid-cols-2 gap-4 text-[12px]">
                                                <div className="p-5 bg-red-50 border border-red-100 rounded text-left">
                                                    <div className="font-bold mb-1">主导焦虑</div><div className="opacity-70 text-red-900">{result.anxiety}</div>
                                                </div>
                                                <div className="p-5 bg-gray-50 border border-gray-100 rounded text-left">
                                                    <div className="font-bold mb-1">阴影面</div><div className="opacity-70">{result.shadow}</div>
                                                </div>
                                            </div>
                                        </section>

                                        <section className="space-y-6 text-left">
                                            <h4 className="text-[11px] font-bold uppercase tracking-[0.5em] border-b border-[#dcd8cf] pb-2 text-[#3a3833] opacity-60">进阶书单推荐</h4>
                                            <div className="grid gap-4">
                                                {result.books.map((book, i) => (
                                                    <div key={i} className="bg-white p-6 border border-[#dcd8cf] rounded-xl shadow-sm text-left">
                                                        <h5 className="text-[15px] font-bold mb-1">{book.title}</h5>
                                                        <p className="text-[10px] text-[#a4c29b] font-bold mb-2 uppercase">作者: {book.author}</p>
                                                        <p className="text-xs text-[#6d6b64] italic leading-relaxed opacity-80">{book.desc}</p>
                                                    </div>
                                                ))}
                                            </div>
                                        </section>
                                    </div>
                                </div>
                            </div>

                            <div className="pt-8 space-y-4 text-center px-4">
                                <button onClick={saveAsImage} disabled={isSaving} className="w-full py-6 bg-black text-white text-[11px] font-bold uppercase tracking-[0.6em] shadow-2xl active:scale-95 transition-all rounded-2xl">{isSaving ? "正在生成中..." : "保存手稿报告 / SAVE REPORT"}</button>
                                <button onClick={handleRestart} className="w-full py-6 border border-[#3a3833] text-[#3a3833] text-[11px] font-bold uppercase tracking-[0.6em] hover:bg-[#3a3833] hover:text-white transition-all rounded-2xl">
                                    <Icon name="RefreshCw" size={14} className="inline mr-2" /> 再次校准原型
                                </button>
                            </div>
                        </div>
                    )}
                    <footer className="mt-16 pt-16 border-t border-[#dcd8cf] text-center space-y-4">
                        <p className="text-[10px] tracking-[0.6em] uppercase text-[#3a3833] font-bold opacity-60">© 2026 CURATED BY @云树CLOUDTREE</p>
                    </footer>
                </div>
            );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
