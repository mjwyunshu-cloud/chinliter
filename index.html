<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>文学原型测试 | 灵魂手稿</title>
    
    <script src="https://fastly.jsdelivr.net/npm/react@18/umd/react.production.min.js"></script>
    <script src="https://fastly.jsdelivr.net/npm/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://fastly.jsdelivr.net/npm/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://fastly.jsdelivr.net/npm/chart.js"></script>
    <script src="https://fastly.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@200;500;700;900&display=swap" rel="stylesheet">

    <style>
        :root { --bg-color: #f2f0e9; --text-main: #3a3833; }
        body {
            font-family: 'Noto Serif SC', serif;
            background-color: var(--bg-color);
            color: var(--text-main);
            -webkit-font-smoothing: antialiased;
            margin: 0;
        }
        .animate-fade-in { animation: fadeIn 0.8s cubic-bezier(0.16, 1, 0.3, 1) forwards; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        
        .highlight-yellow { background: linear-gradient(180deg, rgba(255,255,255,0) 65%, #e8ed2a 65%); padding: 0 4px; }
        
        .redeem-input {
            background: transparent; border: none; border-bottom: 1.5px solid #3a3833;
            outline: none; text-align: center; letter-spacing: 0.2em; transition: all 0.3s;
        }
        .redeem-input:focus { border-bottom: 2px solid #35afcb; }
        .shake { animation: shake 0.4s ease-in-out; }
        @keyframes shake { 0%, 100% { transform: translateX(0); } 25% { transform: translateX(-5px); } 75% { transform: translateX(5px); } }

        .abstract-node { transition: all 0.3s ease; cursor: pointer; pointer-events: all; }
        .abstract-node:hover { transform: scale(1.1); }
        ::-webkit-scrollbar { width: 0px; background: transparent; }
        .result-card { box-shadow: 0 20px 50px rgba(0,0,0,0.1); }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;

        const COLORS = {
            bg: "#f2f0e9", textMain: "#3a3833", textSecondary: "#6d6b64",
            accentYellow: "#e8ed2a", accentBlue: "#35afcb", accentGreen: "#a4c29b", border: "#dcd8cf"
        };

        const Icon = ({ name, size = 24, className = "" }) => {
            const paths = {
                ChevronRight: "M9 18l6-6-6-6", 
                RefreshCw: "M23 4v6h-6M1 20v-6h6M3.51 9a9 9 0 0114.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0020.49 15",
                Quote: "M3 21c3 0 7-1 7-8V5c0-1.25-.75-2-2-2H3c-1.25 0-2 .75-2 2v7c0 1.25.75 2 2 2 0 4-1 6-2 6zm11 0c3 0 7-1 7-8V5c0-1.25-.75-2-2-2h-5c-1.25 0-2 .75-2 2v7c0 1.25.75 2 2 2 0 4-1 6-2 6z",
                History: "M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z",
                X: "M18 6L6 18M6 6l12 12"
            };
            return (
                <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
                    <path d={paths[name] || ""} />
                </svg>
            );
        };

        const WRITER_DATA = {
            "鲁迅": { theme: "#b91c1c", secondary: "#1a1a1a", sub: "拒绝麻木的审视者", status: "启蒙者 / 骨相嶙峋", tags: ["国民性解剖", "铁屋呐喊"], quote: "横眉冷对千夫指，俯首甘为孺子牛。", stats: [98, 70, 40, 60, 95], identity: "你对平庸的妥协持有生理性的敌意。", bio: "中国现代文学的开山鼻祖。他用冷峻真实撕开伪善温情，在绝望中确立了清醒者的尊严。", motif: "绝望的反抗：在必败困局中，由于洞察真相而不得不发出的呐喊。", anxiety: "害怕大众的麻木导致真理失声。", shadow: "极度批判演化为对一切的不信任。", longDesc: "你的人生是持续的自我献祭。拒绝粉饰，认为痛感是确认生命存在的唯一标准。你审视时代，更审视自己灵魂深处的幽暗。", books: [{title: "《野草》", author: "鲁迅", desc: "生命在死火与焦土上的自我拉扯。"}] },
            "张爱玲": { theme: "#4338ca", secondary: "#1e1b4b", sub: "华丽废墟的守望者", status: "洞察者 / 苍凉底色", tags: ["海派传奇", "世俗物哀"], quote: "生命是一袭华丽的袍，爬满了蚤子。", stats: [50, 95, 85, 45, 65], identity: "你在极度琐碎里发现了命运的不可抗力。", bio: "现代文学史上最清醒的异类。专攻人性深处的自私与尴尬。在华丽中捕捉腐朽，将世俗生活的悲剧性推向极致。", motif: "文明的荒原：在时代废墟折痕里，捕捉一抹带有霉味的精致感。", anxiety: "害怕平庸生活消磨掉最后一丝灵气。", shadow: "过度清醒导致对他人的极度疏离。", longDesc: "你有一双洞穿繁华的冷眼。你从不试图拯救谁，只是安静记录那些在欲望博弈中枯萎的灵魂。你认为真实即苍凉。", books: [{title: "《传奇》", author: "张爱玲", desc: "旧梦折痕里的人性自私。"}] },
            "沈从文": { theme: "#0891b2", secondary: "#164e63", sub: "流水与人性的纪录者", status: "造梦人 / 自然原力", tags: ["湘西神话", "人性本真"], quote: "我爱过一个正当最好年龄的人。", stats: [40, 60, 95, 80, 55], identity: "你在物质文明的噪音中礼赞原始人性。", bio: "来自湘西的文学赤子。用白描笔法构建未经污染的人性圣殿，礼赞原始生命力的纯粹与哀伤。", motif: "自然的秩序：自然法则高于社会逻辑。流水带走野花，藏着宇宙最丰饶的真相。", anxiety: "害怕现代文明粉碎人性最后温润的角落。", shadow: "过度自然主义导致对现实竞争的逃避。", longDesc: "你迷恋自然的纯粹。认为文学不应只有斗争，还应有对万物、情感自然的敬畏与描摹。你眼中的人带有土地的神性。", books: [{title: "《边城》", author: "沈从文", desc: "在湘西烟雨中寻找未被污染的灵魂。"}] },
            "钱钟书": { theme: "#0f766e", secondary: "#134e4a", sub: "围城外的冷眼审视者", status: "冷眼人 / 智性巅峰", tags: ["博通中外", "围城困局"], quote: "城外的人想冲进去，城里的人想出来。", stats: [65, 98, 55, 85, 50], identity: "你追求绝对智性，对文明的尴尬有着精准解剖。", bio: "现代学人小说巅峰。博通中外视野，毒舌般精准洞察人类‘尴尬’。文字是场智力盛宴，充满讽刺与自省。", motif: "围城的逻辑：人类所有选择都是基于对他者的误解，这是一种结构性荒谬。", anxiety: "害怕由于过于博学陷入‘书斋困局’。", shadow: "毒舌快感掩盖了对生命真实温度的感知。", longDesc: "你享受博学的孤独。看穿了人类在欲望驱动下的种种尴尬表演，并给予了最优雅、最刻薄的注脚。", books: [{title: "《围城》", author: "钱钟书", desc: "现代人精神尴尬与结构性困局的启示录。"}] },
            "王小波": { theme: "#1d4ed8", secondary: "#1e3a8a", sub: "智性趣味的自由者", status: "理侠 / 逻辑之美", tags: ["反抗愚昧", "有趣灵魂"], quote: "一辈子很长，要找个有趣的人在一起。", stats: [85, 98, 70, 95, 60], identity: "你用逻辑消解崇高，认为有趣是人最后底线。", bio: "文坛独特的自由主义者。将诗意与逻辑完美融合，以漫不经心姿态解构权教条。‘有趣’是独立主体最重要的防线。", motif: "智性博弈：用幽默和逻辑作为防线，戏谑那些自命不凡的平庸。", anxiety: "害怕群体愚昧丧失个人精神自主性。", shadow: "智性优越感演变为冷嘲，忽视了生命痛感。", longDesc: "拒绝被宏大词汇定义。在荒谬中保持诚实幽默，致力于在无趣世界开辟自由疆域。认为一个人只拥有此生此世是不够的。", books: [{title: "《黄金时代》", author: "王小波", desc: "用理性和有趣对抗整个时代的荒诞。"}] },
            "史铁生": { theme: "#4b5563", secondary: "#111827", sub: "生命局限的静思者", status: "静思者 / 灵魂突围", tags: ["地坛哲思", "死亡契约"], quote: "死是一个必然会降临的节日。", stats: [75, 90, 65, 50, 98], identity: "你在废墟上思考生存，完成了对肉身的突围。", bio: "在地坛完成对存在局限的终极追问。以病弱躯壳与死神博弈，在精神上完成了辉煌突围。", motif: "宿命的和解：在必然局限中，创造无限宽广的精神空间。", anxiety: "害怕肉体禁锢丧失与宇宙连接的能力。", shadow: "深度哲思带有沉重宗教仪式感。", longDesc: "你承认肉身局限。与死亡达成默契，获得生之宁静。文学是终极追问，你通过思考把自己活成了时代的坐标。", books: [{title: "《我与地坛》", author: "史铁生", desc: "关于生存、残缺与永恒的终极对谈。"}] },
            "萧红": { theme: "#7c3aed", secondary: "#4c1d95", sub: "呼兰河畔的漂泊灵性", status: "漂泊者 / 野生灵性", tags: ["东北荒野", "洛神遗风"], quote: "那是呼兰河传，那是我的小城故事。", stats: [70, 45, 90, 98, 75], identity: "你有野生的直觉，在荒凉岁月里记录孤独与灵性。", bio: "天才女性。一生是仓皇迁徙，文字是对阵痛最敏锐的捕捉。生命粗砺如泥，却透着神辉。", motif: "生死场上的颤动：人类卑微且顽强地生灭，原始野性是文学本质。", anxiety: "害怕定居丧失灵魂中最宝贵的野生感。", shadow: "极度漂泊感使人生在现实层面无法落脚。", longDesc: "在荒凉岁月里赤脚行走。生命是无终点迁徙。文字充满原始战栗感，是对底层生命苦难最温柔也最狠辣的注视。", books: [{title: "《呼兰河传》", author: "萧红", desc: "用灵性笔触勾勒人类生灭的原始长卷。"}] },
            "曹雪芹": { theme: "#ca8a04", secondary: "#713f12", sub: "大观园的织梦人", status: "织梦人 / 繁华幻灭", tags: ["红楼梦", "东方挽歌"], quote: "质本洁来还洁去，强于污淖陷渠沟。", stats: [40, 80, 98, 45, 90], identity: "你洞穿了万物覆灭，却沉醉于记录那一抹华丽。", bio: "古典文学高峰。在幻梦中预演文明覆灭，实现世俗到美学总结的伟大质变。", motif: "美的悼词：在必将到来的崩坏前，记录那一抹瞬间华丽。", anxiety: "害怕极致的美在权力争夺中瞬间消亡。", shadow: "透彻宿命感容易使人生陷入虚无。", longDesc: "在字里行间构建幻梦。坚信美是荒唐世界唯一的救赎。你的一生都在试图挽留注定逝去的余晖。", books: [{title: "《红楼梦》", author: "曹雪芹", desc: "东方文明的美学终结与生命祭奠。"}] },
            "林徽因": { theme: "#be185d", secondary: "#701a75", sub: "纯净审美的构建者", status: "建筑师 / 纯净审美", tags: ["理性结构", "四月天"], quote: "你是人间的四月天，笑响点亮了四面风。", stats: [35, 75, 50, 55, 95], identity: "你在理性的建筑与感性的诗歌间寻找平衡。", bio: "动荡时代的建筑师。用理性框架支撑感性审美圣殿。追求词藻纯净与精神轻盈，是混乱时代的一抹微光。", motif: "废墟上的优雅：审美是最后尊严，用优雅构建内心理想国。", anxiety: "害怕外部动荡毁灭内心的圣殿。", shadow: "过度追求纯净导致无法直视现实脓疮。", longDesc: "你守护审美，认为那是人的尊严。在动荡中寻求秩序，追求词藻轻盈与精神纯正。", books: [{title: "《你是人间的四月天》", author: "林徽因", desc: "在理性与感性间捕捉理想。"}] },
            "三毛": { theme: "#ea580c", secondary: "#7c2d12", sub: "流浪的存在主义者", status: "实验员 / 浪漫流浪", tags: ["撒哈拉", "绝对自由"], quote: "如果你给我的，和你给别人的一样，那我就不要了。", stats: [88, 45, 75, 98, 65], identity: "你将生命过成实验，在行走中发明自我。", bio: "拒绝被定义。在行走中发明了‘真我’。文字是狂风、黄沙、烈火，唤醒一代人对远方的渴望。", motif: "身份在路上：自由是灵魂唯一燃料，拒绝平庸的定居。", anxiety: "害怕被任何人定义或束缚。", shadow: "极致自我中心导致与现实社会脱节。", longDesc: "拒绝平庸。文字带有异域狂风。你在远方寻找姓名，用一生抗拒灵魂的枯萎。", books: [{title: "《撒哈拉的故事》", author: "三毛", desc: "对自由最赤裸的呼唤。"}] },
            "杨绛": { theme: "#166534", secondary: "#064e3b", sub: "洗净铅华的观察家", status: "观察家 / 洁白克制", tags: ["洗炼文风", "生命智慧"], quote: "我们仨，就剩下我一个了。", stats: [35, 92, 45, 55, 90], identity: "你在平淡中见真意，力量源于内心的宁静。", bio: "文坛最宁静声音。经历世纪波澜后，用最洁白笔触记录温润情感。文字没有多余盐分，饱含生命智慧。", motif: "守望灯火：在喧嚣边缘守住书卷，是对时代最温柔的反抗。", anxiety: "害怕过于外向的喧嚣破坏内心专注。", shadow: "过度克制显得对外部冲突缺乏热量。", longDesc: "经历了世纪动荡后选择克制。文字是记录温度的日记，是智性之上的守望。", books: [{title: "《我们仨》", author: "杨绛", desc: "极简文字下的深情力量。"}] },
            "丁玲": { theme: "#15803d", secondary: "#064e3b", sub: "时代漩涡中的抉择者", status: "抉择者 / 时代激荡", tags: ["女性主体", "自我解放"], quote: "人，只要有一种信念，有所追求，就能忍受。", stats: [92, 65, 55, 50, 95], identity: "你敢于在冲突中直面自我，在历史阵痛中挣扎。", bio: "剧烈挣扎的先锋。人生是次次重组，文字展现强韧主体性，在漩涡中寻找真实自我。", motif: "信念韧度：自我解放不是目的，是投身宏大进程的起点。", anxiety: "害怕过度关注小我丧失对正义的参与。", shadow: "投身时代的狂热掩盖了个体真实。", longDesc: "你是投身的火，灼烧的铁。展现极强韧生命张力。", books: [{title: "《太阳照在桑干河上》", author: "丁玲", desc: "宏大进程中的个体阵痛。"}] },
            "王安忆": { theme: "#be185d", secondary: "#701a75", sub: "城市日常的织梦人", status: "织梦人 / 城市肌理", tags: ["海派传人", "弄堂逻辑"], quote: "在繁华的尘埃里，寻找人世的逻辑。", stats: [45, 90, 75, 55, 80], identity: "你迷恋细枝末节的厚度，在喧嚣中编织逻辑。", bio: "最具耐性的工笔画家。在弄堂细碎逻辑中缝制史诗，探讨城市精神的延续与断裂。", motif: "寻找逻辑：城市的灵魂藏在琐碎至极的生存博弈中。", anxiety: "害怕城市精神在商业化洪流中丧失逻辑。", shadow: "过于绵密细节消解了叙事爆发力。", longDesc: "认为文学是工笔画。在弄堂里绣出史诗，重塑城市的叙事逻辑。", books: [{title: "《长恨歌》", author: "王安忆", desc: "上海弄堂里的情感史诗。"}] },
            "残雪": { theme: "#581c87", secondary: "#2e1065", sub: "潜意识的实验员", status: "梦游者 / 潜意识深渊", tags: ["先锋极致", "异化噩梦"], quote: "在极致的纯粹中，寻找灵魂的出口。", stats: [98, 45, 98, 85, 75], identity: "你拒绝与外部现实和解，专攻内部异化。", bio: "最彻底先锋。切断外部联系，专攻内部异化与噩梦。是文学中最孤独、最令人战栗的异类。", motif: "内部秘径：现实只是影子，文字是通向黑暗唯一的出口。", anxiety: "害怕外界频繁接触干扰梦境纯粹。", shadow: "彻底自我封闭使文字充满战栗孤独。", longDesc: "文字是通向内部深渊的秘径。你是文学中最冷峻尖锐的异类。", books: [{title: "《黄泥街》", author: "残雪", desc: "开启东方先锋文学的奇诡梦境。"}] },
            "迟子建": { theme: "#0369a1", secondary: "#082f49", sub: "冰雪大地的守火者", status: "守火者 / 自然悲悯", tags: ["黑土地", "温情现实"], quote: "在寒冷的北方，灵魂也会开出温暖的花。", stats: [40, 70, 88, 92, 85], identity: "你坚信自然法则高于社会，在极寒中守望温存。", bio: "扎根冰雪大地。用神性笔触记录少数民族兴衰。文字散发阔大悲悯的自然精神。", motif: "自然神圣：严寒中守望最后的人性善良。", anxiety: "害怕古老自然文明被现代铁骑踏碎。", shadow: "过度怀旧色彩美化了边缘苦难。", longDesc: "扎根北方边缘。文学是漫长冬夜里的一盏油灯。", books: [{title: "《额尔古纳河右岸》", author: "迟子建", desc: "对古老文明的绝美挽歌。" }] },
            "舒婷": { theme: "#e11d48", secondary: "#881337", sub: "独立与温柔的诗人", status: "诗人 / 独立风骨", tags: ["朦胧诗", "致橡树"], quote: "我必须是你近旁的一株木棉。", stats: [45, 65, 88, 75, 85], identity: "你拥有一种充满力量的温柔。强调自我独立与平视。", bio: "朦胧诗派核心。确立女性平等感性宣言。文字既有柔韧又有骨气。", motif: "拒绝攀附：我必须作为树的形象和你站在一起。", anxiety: "害怕过度情感投入丧失个体自主。", shadow: "对理性的追求使感性瞬间过于清醒。", longDesc: "文学是对人格自主的宣誓，也是生命深情的赞歌。", books: [{title: "《致橡树》", author: "舒婷", desc: "当代情感独立精神圣经。" }] },
            "莫言": { theme: "#991b1b", secondary: "#450a0a", sub: "民间幻象的通灵者", status: "通灵者 / 大地幻象", tags: ["魔幻现实", "高密原力"], quote: "生死疲劳，从荒原到幻象。", stats: [85, 55, 95, 65, 80], identity: "你将民间粗砺升华为绚烂幻觉。", bio: "爆发力惊人。将民间荒诞编织成魔幻现实。挖掘格式化外的生命元神。", motif: "轮回幻象：权力叙事下，大地欲望与牺牲才是永恒。", anxiety: "害怕土地最原始生命力被技术格式化。", shadow: "血腥与狂想交织使感官过载。", longDesc: "叙事带有野性泥土味。挖掘历史原始生命力，重构民族苦难叙事。", books: [{title: "《生死疲劳》", author: "莫言", desc: "东方魔幻现实主义巅峰。"}] },
            "余华": { theme: "#1e293b", secondary: "#020617", sub: "苦难底色的生存者", status: "见证者 / 生存底色", tags: ["苦难叙事", "活着意志"], quote: "活着，活着本身就是唯一的理由。", stats: [75, 85, 50, 60, 98], identity: "你剥离感伤，认为苦难面前尊严就是忍受。", bio: "剥离感伤书写苦难。揭示生命本能——忍受。‘活着’是一座庄严的大山。", motif: "活着即理由：剥离理想后，苦难中耕耘的影子才是真实。", anxiety: "害怕生存匮乏丧失人的基本属性。", shadow: "冷静到近乎麻木视角显得冷酷。", longDesc: "用冰冷笔触书写极端痛感。关注在那之上的生存本能。", books: [{title: "《活着》", author: "余华", desc: "生存意志的最强音。"}] },
            "老舍": { theme: "#92400e", secondary: "#451a03", sub: "平民脊梁的守望者", status: "守望者 / 平民脊梁", tags: ["北京地域", "市民宿命"], quote: "活着，这就是生活。", stats: [65, 70, 60, 55, 85], identity: "你扎根大地，对平凡人的尊严持有深刻同情。", bio: "京派巨匠。扎根胡同尘土写出魂魄史诗。深藏对传统文明崩塌的悲痛。", motif: "体面脆弱：文明消失始于平凡人的无声崩裂。", anxiety: "害怕时代剧变导致文明根基断裂。", shadow: "故土依恋转化为某种保守忧伤。", longDesc: "幽默外壳下记录平民尊严。记录正在消失的文明。", books: [{title: "《四世同堂》", author: "老舍", desc: "民族魂魄微观史诗。"}] },
            "金庸": { theme: "#854d0e", secondary: "#451a03", sub: "江湖秩序的重构者", status: "守望者 / 古典大义", tags: ["成人童话", "家国情怀"], quote: "侠之大者，为国为民。", stats: [75, 65, 55, 75, 92], identity: "你在成人世界编织童话。不仅记录传奇。", bio: "武侠宗师。提升武侠至哲学高度。构建侠义道德乌托邦，保留古典风骨。", motif: "知其不可：权力阴谋中，个体选择应基于道义责任。", anxiety: "害怕传统侠义精神在功利主义前崩塌。", shadow: "宏大叙事可能忽视人性的自私。", longDesc: "为社会提供另一种想象，文学是浪漫主义最后阵地。", books: [{title: "《射雕英雄传》", author: "金庸", desc: "侠义精神现代图腾。"}] }
        };

        const QUESTIONS = [
            { id: 1, text: "清晨，你置身于完全焊死的铁屋。周围人打着死沉的鼾声，氧气正被贪婪耗尽。喉头滚烫：", options: [
                { text: "拍打铁壁。即便呐喊只会让惊醒者面临绝望的清醒。", target: "鲁迅" },
                { text: "坐在角落。冷静计算氧气耗竭的精确秒数。", target: "钱钟书" },
                { text: "抚摸铁壁。觉得这一片死寂藏着某种古老的宿命感。", target: "沈从文" },
                { text: "闭眼构想花园。只要灵魂飞翔，铁屋只是无用的壳。", target: "三毛" }
            ]},
            { id: 2, text: "夕阳染红河面。野花滑向看不见的下游。许诺会出现的人迟迟未归：", options: [
                { text: "盯着水波。觉得“等不到”本身即是自然的法则。", target: "沈从文" },
                { text: "赤脚跑进旷野。既然他不归，我便走我的路。", target: "三毛" },
                { text: "翻开日记。将这份孤独分类、归档、密封。", target: "杨绛" },
                { text: "任由双腿麻木。这种无望的等待最显肉身强度。", target: "史铁生" }
            ]},
            { id: 3, text: "弄堂月光像馊掉的牛奶。旗袍盘扣勒紧喉咙。你发现一串虱子正从丝绸里爬向后颈：", options: [
                { text: "点燃半截纸烟：这华丽，本质就是一滩烂泥。", target: "张爱玲" },
                { text: "撕开扣子。这弄堂是细密的网，我要跑向远方。", target: "三毛" },
                { text: "取下剪刀。想把这层发霉的、虚伪的文明剪碎。", target: "鲁迅" },
                { text: "闭眼构思大观园。那里至少曾有过洁白的雪。", target: "曹雪芹" }
            ]},
            { id: 4, text: "园墙塌了一半。双腿失去知觉。周围只有落叶在水泥地上摩擦的沙沙声：", options: [
                { text: "承认残缺。在这片废墟上思考自我的精确坐标。", target: "史铁生" },
                { text: "盯着年轮。解析这套超越个人肉身的智性逻辑。", target: "王小波" },
                { text: "将这凄冷化作挽歌。文字是泥土里颤动的洛神。", target: "萧红" },
                { text: "守望温存。在严寒降临前，为后来者留下一盏灯。", target: "迟子建" }
            ]},
            { id: 5, text: "锦绣满地。当所有人都在推杯换盏，你嗅到了繁华即将崩塌的土腥味：", options: [
                { text: "陪祭这场幻梦。用极致的美守护这注定毁灭的最后一秒。", target: "曹雪芹" },
                { text: "在弄堂缝隙里，做一个理性的、有耐心的缝补者。", target: "王安忆" },
                { text: "钻进潜意识。切断所有出口，独自实验那场噩梦。", target: "残雪" },
                { text: "背起行囊走入沙漠。拒绝当任何繁华的殉葬品。", target: "三毛" }
            ]},
            { id: 6, text: "污水淹没了书架。书页泡涨发臭。水淹过膝盖，你手里攥着断了尖的钢笔：", options: [
                { text: "写在心口。那是任何洪水也无法格式化的人格代码。", target: "杨绛" },
                { text: "写下高级嘲弄。计算智性在这场覆灭中的概率。", target: "钱钟书" },
                { text: "看着书页化作浮萍。觉得这覆灭里有神圣规律。", target: "沈从文" },
                { text: "诅咒洪涝。在石头上刻下对某种权力的质问。", target: "鲁迅" }
            ]},
            { id: 7, text: "火堆快熄了。暴雪足以在十秒内冻结血液。手稿是这里唯一的燃料：", options: [
                { text: "扔进火中。为了活着而忍受痛苦，是唯一的道义。", target: "余华" },
                { text: "任由火灭。在黑暗中计算冰点降临的精确秒数。", target: "王小波" },
                { text: "走出帐篷。在自然的壮丽中完成最后的自我交付。", target: "迟子建" },
                { text: "在墙根刻下名字。通过记录对抗彻底的遗忘。", target: "萧红" }
            ]},
            { id: 8, text: "路边有人分发抹除记忆的蓝色药丸。吞下它将获得平庸的快乐。你会：", options: [
                { text: "踩碎它。痛苦是确认我这个“主体”存在的唯一铁证。", target: "鲁迅" },
                { text: "留着它。作为解构这种廉价安慰的智性样本。", target: "钱钟书" },
                { text: "喝一半。过滤脏污，留下关于美的局部档案。", target: "林徽因" },
                { text: "推开它。我只要自由的风，不要任何确定性。", target: "王小波" }
            ]},
            { id: 9, text: "文学法器。最契合你指尖触感的是：", options: [
                { text: "一把能在深夜剖开伪善、散发冷光的解剖刀。", target: "鲁迅" },
                { text: "一架观测星体、具有精密逻辑推导能力的望远镜。", target: "钱钟书" },
                { text: "一个装满晚霞、能洗净铅华的旧墨水瓶。", target: "杨绛" },
                { text: "一张通向异乡、沾满风暴灰尘的远行地图。", target: "三毛" }
            ]},
            { id: 10, text: "必须为对手设计最终宿命。你会：", options: [
                { text: "赋予他更坚定的反抗精神。甚至反过来审判我。", target: "鲁迅" },
                { text: "让他陷入智力怪圈。在无穷的尴尬中自我消解。", target: "钱钟书" },
                { text: "让他消失在漫天大雪。让一切在自然里彻底洁白。", target: "曹雪芹" },
                { text: "让他去流浪。在不停的跋涉中发明自己的姓名。", target: "迟子建" }
            ]},
            { id: 11, text: "假如时间实体化为纸张。你会如何处理？", options: [
                { text: "编织成庞大的网。网住弄堂里所有琐碎瞬间。", target: "王安忆" },
                { text: "刻下见骨划痕。记录对抗遗忘的所有真实伤疤。", target: "余华" },
                { text: "涂上透明彩墨。构建一种虚幻的、半透明的厚度。", target: "残雪" },
                { text: "剪成纸屑。随风飘向空白处，永不试图保留。", target: "三毛" }
            ]},
            { id: 12, text: "看到关于“真理”的小册子。你的反应是：", options: [
                { text: "冷笑。在这个时代，真理往往是谎言的高级形式。", target: "鲁迅" },
                { text: "拆解。寻找逻辑不自洽的漏洞，作为有趣笑料。", target: "王小波" },
                { text: "无视。真理不在纸上，在流水和爱人的眼底。", target: "沈从文" },
                { text: "收藏。作为一段微观历史，安静放进收藏柜。", target: "杨绛" }
            ]},
            { id: 13, text: "叙事中的长久沉默。你认为这种“留白”的物理质感是：", options: [
                { text: "加密电报。等待理性的解码与因果的揭秘。", target: "钱钟书" },
                { text: "深渊边的屏息。预示英雄坠落前最后的悲歌。", target: "史铁生" },
                { text: "即将引爆的炸弹。沉默是为了更猛烈的反叛。", target: "鲁迅" },
                { text: "爱人的叹息。语言无法承载的、极度纯粹的感性。", target: "林徽因" }
            ]},
            { id: 14, text: "被囚地牢。在腐烂前，你会在墙上留下：", options: [
                { text: "一串坐标。指引后来者找到真相的秘密暗道。", target: "王安忆" },
                { text: "一句诅咒。哪怕肉身化土，意志也要化作厉鬼。", target: "鲁迅" },
                { text: "一朵正凋零的玫瑰。守护最后的高贵审美。", target: "林徽因" },
                { text: "一串脚印。“此地不留行”，我从未被真正锁住。", target: "三毛" }
            ]},
            { id: 15, text: "主角面临毫无意义的牺牲。你赋予他：", options: [
                { text: "野蛮生命力。为了“活着”硬生生扛下所有屈辱。", target: "余华" },
                { text: "智性优越感。在荒谬处境中寻找有趣逻辑的戏谑。", target: "王小波" },
                { text: "人格尊严。在平凡琐屑中突然捕捉到的神性。", target: "老舍" },
                { text: "绝望对抗。最终化为荒原上的一抹血色幻象。", target: "莫言" }
            ]},
            { id: 16, text: "路边有人为了生存屈辱鞠躬。你目光交汇的一瞬：", options: [
                { text: "愤怒。认为这个吃人的系统应当被彻底砸烂。", target: "丁玲" },
                { text: "感喟。这弯曲的脊梁是“活着”的庄严隐喻。", target: "余华" },
                { text: "避开目光。粗糙现实会刺伤我构建的审美秩序。", target: "林徽因" },
                { text: "观察。分析这出世俗悲剧背后的复杂权利博弈。", target: "王安忆" }
            ]},
            { id: 17, text: "胜利的消息传来了。人群狂欢。你的生理反应倾向于：", options: [
                { text: "寒意。由于洞察了胜利背后更深层的虚无感。", target: "张爱玲" },
                { text: "神圣感。由于这场胜利必须支付的血腥代价。", target: "丁玲" },
                { text: "快慰。由于那套陈旧的压迫秩序终于崩坏了。", target: "鲁迅" },
                { text: "宁静。由于终于达成了一次智性的逻辑闭环。", target: "杨绛" }
            ]},
            { id: 18, text: "假如文字有声音。你希望书稿的声音是：", options: [
                { text: "铁锤重击铁砧。每一声都带有震碎麻木的力量。", target: "鲁迅" },
                { text: "空谷足音。孤独、清远，不求任何人的回响。", target: "史铁生" },
                { text: "弄堂细密的针脚走线声。琐碎中见大千世界。", target: "王安忆" },
                { text: "大风刮过沙漠的啸叫。自由得让人感到不适。", target: "三毛" }
            ]},
            { id: 19, text: "关于“围城”。城里人想冲出去，城外人想进来：", options: [
                { text: "站在斑驳城墙上冷笑。看穿这结构性的尴尬。", target: "钱钟书" },
                { text: "用一辈子拆墙。哪怕后面是深渊也要打破牢笼。", target: "鲁迅" },
                { text: "在城门边种木棉。让无奈变得具有独立姿态。", target: "舒婷" },
                { text: "不进也不出。我在城外的荒原流浪到天黑。", target: "三毛" }
            ]},
            { id: 20, text: "设计一个注定失败的结局。你会让他临终前：", options: [
                { text: "正面迎接毁灭。在绝望灰烬中确立主体尊严。", target: "余华" },
                { text: "消失在漫天大雾。留下绝美且无法弥补的遗憾。", target: "曹雪芹" },
                { text: "精准解析。让失败成为一堂关于智力局限的课。", target: "钱钟书" },
                { text: "冷笑。用戏谑解构这整场荒唐的命运剧本。", target: "王小波" }
            ]},
            { id: 21, text: "整个图书馆着火。你只能抢救出一页纸：", options: [
                { text: "一张沾满亲人眼泪、记录家庭温度的旧信。", target: "杨绛" },
                { text: "一张写满逻辑公式、确保智性不灭的数据纸。", target: "钱钟书" },
                { text: "一张刻满反叛斗争史、能点燃下一次的火种页。", target: "鲁迅" },
                { text: "一张白纸。在废墟上我们需要重新认领姓名。", target: "残雪" }
            ]},
            { id: 22, text: "面对厚重如山的规矩。你最本能的反应是：", options: [
                { text: "背负。在艰难行走中完成古典守望与传承。", target: "老舍" },
                { text: "拆解。将腐烂符号转化为现代叙事的砖石。", target: "钱钟书" },
                { text: "烧毁。只有在焦土之上自由才有广阔操场。", target: "残雪" },
                { text: "粉饰。在词藻里重构一个从未存在的极美盛世。", target: "林徽因" }
            ]},
            { id: 23, text: "关于“爱”。你的第一直觉倾向于：", options: [
                { text: "两团火苗在冬夜交换温度的契约。", target: "迟子建" },
                { text: "作为树的形象和你站在一起，平视且独立。", target: "舒婷" },
                { text: "华丽袍子下的博弈，本质是自私者的收留。", target: "张爱玲" },
                { text: "让受压迫灵魂瞬间觉醒、产生反抗的力量。", target: "鲁迅" }
            ]},
            { id: 24, text: "镜子里突然看到陌生人的脸。你会：", options: [
                { text: "尖叫。那是潜意识里被我杀死的另一个自我。", target: "残雪" },
                { text: "逼视。我想知道这个灵魂是否也有不妥协的风骨。", target: "鲁迅" },
                { text: "淡定。也许这只是宇宙折叠产生的美丽差错。", target: "沈从文" },
                { text: "涂抹。用胭脂去覆盖，直到镜面变回熟悉的平庸。", target: "张爱玲" }
            ]},
            { id: 25, text: "整个文字世界坍塌。只允许保留一个词：", options: [
                { text: "“但是” —— 代表永远的转折与不服从。", target: "鲁迅" },
                { text: "“因为” —— 守住因果底线，确保理性。", target: "钱钟书" },
                { text: "“也许” —— 在朦胧中保留余地，不致刺眼。", target: "沈从文" },
                { text: "“再会” —— 预示下一场迁徙，灵魂在路上。", target: "三毛" }
            ]},
            { id: 26, text: "文学里的“风景”应当是哪种状态？", options: [
                { text: "布满荆棘的荒原。试炼英雄骨骼的战道。", target: "鲁迅" },
                { text: "迷雾森林。通往潜意识噩梦的隐喻线索。", target: "残雪" },
                { text: "半梦半醒的江南。逃离现实的温润避难所。", target: "曹雪芹" },
                { text: "极北雪原。守望最后一点人性的善良。", target: "迟子建" }
            ]},
            { id: 27, text: "最后，如果你可以掌握一种虚构的力量：", options: [
                { text: "将苦难提炼成黄金。让被侮辱者获得加冕。", target: "莫言" },
                { text: "在裂缝中挖深井。修补那破碎苍凉的现实。", target: "王安忆" },
                { text: "在空白处发明引力。让混乱逻辑重新归位。", target: "钱钟书" },
                { text: "将世界缩减成书柜。而我拥有唯一的钥匙。", target: "杨绛" }
            ]},
            { id: 28, text: "面对一个毫无意义、却被盲目崇拜的纪念碑：", options: [
                { text: "写满注脚。用智性拆解它荒谬的地基。", target: "王小波" },
                { text: "种下野草。生命比石头更具颠覆力。", target: "迟子建" },
                { text: "啐一口。麻木的崇拜是对清醒者的侮辱。", target: "鲁迅" },
                { text: "画进背景。纪念碑只是苍凉景观的补丁。", target: "王安忆" }
            ]},
            { id: 29, text: "文字在宇宙终极的形态应该是：", options: [
                { text: "一把火炬。点燃读者的同时也燃尽自己。", target: "鲁迅" },
                { text: "一个圆环。首尾相接，逻辑自闭且神圣。", target: "杨绛" },
                { text: "延伸至地平线的、模糊的河流直线。", target: "沈从文" },
                { text: "虚空中颤动的羽毛。捕捉风的异化。", target: "残雪" }
            ]},
            { id: 30, text: "为灵魂选一个物理容器。你选：", options: [
                { text: "锈迹斑斑、能刺穿厚茧的旧缝衣针。", target: "杨绛" },
                { text: "在黑夜切开伪善、散发冷光的解剖刀。", target: "鲁迅" },
                { text: "装满残茶、边缘已经崩损的旧瓷碗。", target: "老舍" },
                { text: "被狂风吹弯、拒绝折断的野生羽毛。", target: "萧红" }
            ]}
        ];

        const AbstractNode = ({ name, isActive, onClick }) => {
            return (
                <g className="abstract-node" onClick={onClick}>
                    <rect x="0" y="0" width="40" height="70" fill="transparent" />
                    <circle cx="20" cy="15" r="3.5" fill={isActive ? "#35afcb" : "#3a383344"} />
                    <path d="M20 18.5 Q22 28 18 38" stroke={isActive ? "#35afcb" : "#3a383344"} strokeWidth="2" fill="none" strokeLinecap="round" />
                    <path d="M19 25 L32 18" stroke={isActive ? "#35afcb" : "#3a383344"} strokeWidth="1.2" fill="none" strokeLinecap="round" />
                    <path d="M18 38 L10 48 L22 52" stroke={isActive ? "#35afcb" : "#3a383344"} strokeWidth="1.2" fill="none" strokeLinecap="round" />
                    <text x="20" y="65" textAnchor="middle" fontSize="9" fill={isActive ? "#3a3833" : "#3a383333"} fontWeight={isActive ? "bold" : "normal"}>{name}</text>
                </g>
            );
        };

        const LiteraryConstellation = ({ onSelect, activeName }) => {
            const radiusX = 140; const radiusY = 120;
            const centerX = 180; const centerY = 160;
            const masters = Object.keys(WRITER_DATA);

            return (
                <svg viewBox="0 0 360 320" className="w-full h-full drop-shadow-sm" style={{ touchAction: 'manipulation' }}>
                    <ellipse cx={centerX} cy={centerY} rx={radiusX} ry={radiusY} fill="none" stroke="#3a3833" strokeWidth="0.5" strokeDasharray="4 4" opacity="0.1" />
                    <g transform="translate(130, 120)" opacity="0.08" style={{mixBlendMode: 'multiply'}}>
                        <path d="M10 40 Q 30 10 70 35 Q 90 60 50 80 Q 20 70 10 40" fill="#a4c29b" /><path d="M25 45 Q 45 15 85 40 Q 105 65 65 85" fill="#35afcb" />
                    </g>
                    {masters.map((name, i) => {
                        const angle = (i / masters.length) * Math.PI * 2 - Math.PI / 2;
                        const x = centerX + Math.cos(angle) * radiusX;
                        const y = centerY + Math.sin(angle) * radiusY;
                        return (
                            <g key={name} transform={`translate(${x - 20}, ${y - 30})`}>
                                <AbstractNode name={name} isActive={activeName === name} onClick={() => onSelect(name)} />
                            </g>
                        );
                    })}
                </svg>
            );
        };

        function App() {
            const [step, setStep] = useState('welcome');
            const [currentQuestion, setCurrentQuestion] = useState(0);
            const [scores, setScores] = useState({});
            const [history, setHistory] = useState([]);
            const [result, setResult] = useState(null);
            const [isSaving, setIsSaving] = useState(false);
            const [selectedWriter, setSelectedWriter] = useState("鲁迅");
            const [code, setCode] = useState("");
            const [showError, setShowError] = useState(false);
            
            const radarCanvas = useRef(null);
            const captureRef = useRef(null);
            const chartRef = useRef(null);

            const handleVerify = () => {
                if (code.toLowerCase().trim() === "qwert") setStep('quiz');
                else { setShowError(true); setTimeout(() => setShowError(false), 500); }
            };

            const handleAnswer = (target) => {
                const newScores = { ...scores, [target]: (scores[target] || 0) + 1 };
                setHistory([...history, { scores, currentQuestion }]);
                setScores(newScores);
                if (currentQuestion < 29) setCurrentQuestion(currentQuestion + 1);
                else {
                    const topWriterName = Object.keys(newScores).reduce((a, b) => (newScores[a] || 0) >= (newScores[b] || 0) ? a : b, "鲁迅");
                    setResult({ ...WRITER_DATA[topWriterName], name: topWriterName });
                    setStep('result');
                    window.scrollTo(0, 0);
                }
            };

            const handleBack = () => {
                if (history.length > 0) {
                    const last = history[history.length - 1];
                    setScores(last.scores); setCurrentQuestion(last.currentQuestion);
                    setHistory(history.slice(0, -1));
                } else setStep('welcome');
            };

            const handleRestart = () => {
                setStep('welcome'); setCurrentQuestion(0); setScores({}); setHistory([]); setResult(null); setCode("");
                window.scrollTo(0, 0);
            };

            const saveAsImage = async () => {
                if (typeof html2canvas === 'undefined') return;
                setIsSaving(true);
                try {
                    const canvas = await html2canvas(captureRef.current, { scale: 2, backgroundColor: "#f2f0e9", useCORS: true });
                    const link = document.createElement('a');
                    link.download = `灵魂手稿-${result.name}.png`;
                    link.href = canvas.toDataURL('image/png');
                    link.click();
                } catch (err) { console.error(err); }
                setIsSaving(false);
            };

            useEffect(() => {
                if (step === 'result' && result && radarCanvas.current) {
                    if (chartRef.current) chartRef.current.destroy();
                    const ctx = radarCanvas.current.getContext('2d');
                    chartRef.current = new Chart(ctx, {
                        type: 'radar',
                        data: {
                            labels: ['批判逻辑', '智性深度', '审美强度', '自由意志', '精神韧性'],
                            datasets: [{ data: result.stats, backgroundColor: `${result.theme}22`, borderColor: result.theme, borderWidth: 2, pointRadius: 0 }]
                        },
                        options: { scales: { r: { angleLines: { display: false }, grid: { color: 'rgba(0,0,0,0.05)' }, pointLabels: { font: { size: 9, family: 'Noto Serif SC', weight: 'bold' } }, ticks: { display: false }, min: 0, max: 100 } }, plugins: { legend: { display: false } } }
                    });
                }
            }, [step, result]);

            const dossier = WRITER_DATA[selectedWriter];

            return (
                <div className="max-w-xl mx-auto px-4 py-8 relative">
                    {step === 'welcome' && (
                        <div className="animate-fade-in text-center space-y-8">
                            <div className="flex justify-between items-start pt-4">
                                <div className="inline-block px-2 py-0.5 bg-[#3a3833] text-[#f2f0e9] text-[8px] tracking-widest font-sans uppercase">ARCHETYPE ARCHIVE</div>
                                <div className="text-[8px] opacity-30 font-bold uppercase tracking-widest">NO. 2026 / SYSTEM 01</div>
                            </div>
                            
                            <div className="text-left">
                                <h1 className="text-4xl md:text-5xl font-black tracking-[0.1em] text-[#3a3833]">认领你的<span className="highlight-yellow ml-2">文学原型</span></h1>
                                <p className="mt-4 text-[9px] text-gray-400 tracking-[0.4em] uppercase font-bold tracking-widest">LITERARY NARRATIVE SYSTEM</p>
                            </div>

                            <div className="w-full relative py-4">
                                <LiteraryConstellation onSelect={setSelectedWriter} activeName={selectedWriter} />
                                <div className="absolute top-[5%] right-0 bg-white px-3 py-1.5 rounded-sm shadow-xl border border-[#dcd8cf] transform rotate-3 max-w-[120px] z-20 pointer-events-none">
                                    <p className="text-[9px] text-[#3a3833] leading-tight font-bold italic">“点击名字，<br/>提取绝密档案。”</p>
                                </div>
                            </div>

                            <div className="border-t-2 border-[#3a3833] pt-8 text-left space-y-6">
                                <div className="flex justify-between items-end">
                                    <div className="space-y-1">
                                        <h2 className="text-4xl font-bold tracking-widest text-[#3a3833]">{selectedWriter}</h2>
                                        <p className="text-[10px] font-bold text-[#35afcb] uppercase tracking-[0.2em]">{dossier.status}</p>
                                    </div>
                                    <div className="flex gap-2">{dossier.tags.map(t => <span key={t} className="text-[8px] border border-[#dcd8cf] px-1.5 py-0.5 opacity-50 font-bold">#{t}</span>)}</div>
                                </div>
                                <div className="space-y-4">
                                    <p className="text-[12px] leading-[1.8] text-[#6d6b64] text-justify font-light">{dossier.bio}</p>
                                    <div className="space-y-1.5">
                                        <h4 className="text-[9px] font-bold uppercase tracking-widest opacity-30 flex items-center gap-2"><div className="w-3 h-[1px] bg-black"></div> 精神坐标 / IDENTITY</h4>
                                        <p className="text-[12px] leading-relaxed text-[#3a3833] italic bg-white bg-opacity-50 p-3 border-l-2 border-[#e8ed2a]">{dossier.identity}</p>
                                    </div>
                                </div>
                            </div>

                            <div className="space-y-8 pt-8">
                                <div className={`space-y-4 ${showError ? 'shake' : ''}`}>
                                    <div className="flex flex-col items-center gap-2">
                                        <span className="text-[10px] uppercase tracking-[0.3em] opacity-40 font-bold">通行码认证 / ACCESS CODE</span>
                                        <input type="text" value={code} onChange={(e) => setCode(e.target.value)} className="redeem-input w-48 py-2 text-sm text-center" placeholder="请输入通行码解锁测试" />
                                    </div>
                                </div>
                                <button onClick={handleVerify} className="w-full py-7 bg-[#3a3833] text-white text-[12px] tracking-[0.8em] font-bold shadow-2xl active:scale-95 transition-all">开启漫游 / ENTER</button>
                                <div className="text-[10px] text-gray-400 tracking-[0.3em] pb-12">Designed by @云树cloudtree</div>
                            </div>
                        </div>
                    )}

                    {step === 'quiz' && (
                        <div className="animate-fade-in space-y-10 text-center py-6">
                            <div className="flex justify-between items-center border-b border-[#dcd8cf] pb-4">
                                <button onClick={handleBack} className="flex items-center gap-1 text-[10px] uppercase opacity-40 hover:opacity-100 transition-all font-bold tracking-widest">BACK</button>
                                <span className="text-[9px] uppercase text-[#6d6b64] font-black tracking-widest opacity-40">DECISION {String(currentQuestion + 1).padStart(2, '0')} / 30</span>
                                <div className="w-10"></div>
                            </div>
                            <div className="min-h-[160px] flex flex-col items-center justify-center px-4">
                                <h2 className="text-[18px] md:text-[21px] font-normal leading-[1.8] text-[#3a3833] text-justify">{QUESTIONS[currentQuestion].text}</h2>
                            </div>
                            <div className="space-y-4 text-left">
                                {QUESTIONS[currentQuestion].options.map((option, idx) => (
                                    <button key={idx} onClick={() => handleAnswer(option.target)} className="w-full p-6 bg-white bg-opacity-70 rounded-sm border border-[#dcd8cf] hover:border-[#3a3833] transition-all group active:bg-white text-left shadow-sm">
                                        <span className="text-[15px] text-[#6d6b64] group-hover:text-[#3a3833] leading-relaxed pr-4">{option.text}</span>
                                    </button>
                                ))}
                            </div>
                            <div className="pt-6 flex justify-center"><div className="h-[1px] w-full bg-[#dcd8cf] relative opacity-50"><div className="h-full bg-[#3a3833] transition-all duration-700" style={{width: `${((currentQuestion+1)/30)*100}%`}}></div></div></div>
                        </div>
                    )}

                    {step === 'result' && result && (
                        <div className="animate-fade-in space-y-8 pb-12">
                            <div ref={captureRef} className="pb-12 bg-[#f2f0e9] overflow-hidden rounded-2xl result-card relative text-left">
                                <div className="p-12 text-center relative overflow-hidden" style={{ background: `linear-gradient(135deg, ${result.theme}, ${result.secondary})` }}>
                                    <div className="absolute top-0 left-0 w-full h-full opacity-10">
                                        <svg width="100%" height="100%" viewBox="0 0 100 100" preserveAspectRatio="none"><path d="M0,0 L100,0 L100,20 Q50,40 0,20 Z" fill="white" /><circle cx="90" cy="10" r="15" fill="white" /></svg>
                                    </div>
                                    <div className="relative z-10 space-y-6">
                                        <div className="flex justify-center mb-2"><div className="px-3 py-1 bg-white bg-opacity-20 text-white text-[8px] tracking-[0.5em] uppercase font-bold border border-white border-opacity-30 rounded-sm">Archetype No. {Math.floor(Math.random()*10000)}</div></div>
                                        <h2 className="text-5xl md:text-6xl font-bold text-white tracking-[0.2em] text-center">{result.name}</h2>
                                        <div className="space-y-4">
                                            <p className="text-sm text-white italic font-light tracking-[0.5em] opacity-90 text-center">{result.sub}</p>
                                            <div className="flex justify-center gap-3"><span className="px-4 py-1.5 bg-white text-[10px] font-bold uppercase tracking-widest rounded-full shadow-lg" style={{ color: result.theme }}>原型匹配度 98.7%</span></div>
                                        </div>
                                    </div>
                                </div>

                                <div className="px-6 -mt-10 relative z-20">
                                    <div className="grid grid-cols-1 md:grid-cols-2 gap-6 bg-white p-8 border border-[#dcd8cf] rounded-3xl shadow-2xl items-center mb-8">
                                        <div className="space-y-4 text-left">
                                            <h4 className="text-[11px] font-bold border-b pb-2 text-[#3a3833] opacity-60 uppercase tracking-widest">叙事基因分析 / ANALYSIS</h4>
                                            <div className="space-y-3 text-[10px]">
                                                <div className="flex justify-between items-center text-gray-400 uppercase"><span>批判逻辑</span><div className="w-24 h-1 bg-gray-100"><div className="h-full" style={{width: `${result.stats[0]}%`, backgroundColor: result.theme}}></div></div></div>
                                                <div className="flex justify-between items-center text-gray-400 uppercase"><span>智性深度</span><div className="w-24 h-1 bg-gray-100"><div className="h-full" style={{width: `${result.stats[1]}%`, backgroundColor: result.theme}}></div></div></div>
                                                <div className="flex justify-between items-center text-gray-400 uppercase"><span>审美强度</span><div className="w-24 h-1 bg-gray-100"><div className="h-full" style={{width: `${result.stats[2]}%`, backgroundColor: result.theme}}></div></div></div>
                                            </div>
                                        </div>
                                        <div className="aspect-square w-full max-w-[180px] mx-auto"><canvas ref={radarCanvas}></canvas></div>
                                    </div>

                                    <div className="p-10 bg-white border border-[#dcd8cf] rounded-3xl shadow-sm mb-8 space-y-6 relative overflow-hidden text-left">
                                        <div className="flex items-center gap-3 border-b border-gray-50 pb-4"><Icon name="History" size={18} style={{ color: result.theme }} /><span className="text-[11px] font-bold uppercase tracking-[0.3em] text-[#3a3833] opacity-60">文学史回响 / CONTEXT</span></div>
                                        <p className="text-[13px] text-[#6d6b64] leading-[2.2] text-justify tracking-wide italic">{result.bio}</p>
                                    </div>

                                    <div className="relative p-10 bg-white border border-[#dcd8cf] text-center rounded-3xl shadow-sm mb-8">
                                        <p className="text-xl md:text-2xl leading-[1.8] font-medium italic mb-6 text-center"><span className="highlight-yellow">“{result.quote}”</span></p>
                                        <div className="text-[10px] text-[#a4c29b] tracking-widest uppercase font-bold text-center">— {result.name} —</div>
                                    </div>

                                    <div className="space-y-12 px-2 text-left">
                                        <section className="space-y-4">
                                            <h4 className="text-[11px] font-bold uppercase tracking-[0.5em] border-b border-[#dcd8cf] pb-2 text-[#3a3833] opacity-60">精神原色 / THE SELF</h4>
                                            <div className="bg-white p-8 border-l-4 space-y-6" style={{ borderColor: result.theme }}>
                                                <p className="text-[14px] leading-relaxed text-[#6d6b64] italic">“{result.identity}”</p>
                                                <p className="text-[14px] leading-relaxed font-light">{result.longDesc}</p>
                                            </div>
                                        </section>

                                        <section className="space-y-4 text-left">
                                            <h4 className="text-[11px] font-bold uppercase tracking-[0.5em] border-b border-[#dcd8cf] pb-2 text-red-800 opacity-60">核心焦虑与盲区</h4>
                                            <div className="grid grid-cols-1 md:grid-cols-2 gap-4 text-[13px]">
                                                <div className="p-6 bg-red-50 border border-red-100 rounded text-left">
                                                    <div className="font-bold mb-2 opacity-60 uppercase text-[10px]">主导焦虑</div><div className="opacity-80 text-red-900">{result.anxiety}</div>
                                                </div>
                                                <div className="p-6 bg-gray-50 border border-gray-100 rounded text-left">
                                                    <div className="font-bold mb-2 opacity-60 uppercase text-[10px]">阴影面</div><div className="opacity-70">{result.shadow}</div>
                                                </div>
                                            </div>
                                        </section>

                                        <section className="space-y-6 text-left">
                                            <h4 className="text-[11px] font-bold uppercase tracking-[0.5em] border-b border-[#dcd8cf] pb-2 text-[#3a3833] opacity-60">进阶书单推荐</h4>
                                            <div className="grid gap-4">
                                                {result.books.map((book, i) => (
                                                    <div key={i} className="bg-white p-6 border border-[#dcd8cf] rounded-xl shadow-sm text-left">
                                                        <h5 className="text-[16px] font-bold mb-1">{book.title}</h5>
                                                        <p className="text-[10px] text-[#a4c29b] font-bold mb-3 uppercase">作者: {book.author}</p>
                                                        <p className="text-[13px] text-[#6d6b64] italic leading-relaxed opacity-80">{book.desc}</p>
                                                    </div>
                                                ))}
                                            </div>
                                        </section>
                                    </div>
                                </div>
                            </div>

                            <div className="pt-8 space-y-4 text-center px-4">
                                <button onClick={saveAsImage} disabled={isSaving} className="w-full py-6 bg-black text-white text-[11px] font-bold uppercase tracking-[0.6em] shadow-2xl active:scale-95 transition-all rounded-2xl">{isSaving ? "正在生成中..." : "保存手稿报告 / SAVE REPORT"}</button>
                                <button onClick={handleRestart} className="w-full py-6 border border-[#3a3833] text-[#3a3833] text-[11px] font-bold uppercase tracking-[0.6em] hover:bg-[#3a3833] hover:text-white transition-all rounded-2xl">
                                    <Icon name="RefreshCw" size={14} className="inline mr-2" /> 再次校准原型
                                </button>
                            </div>
                        </div>
                    )}
                    <footer className="mt-16 pt-16 border-t border-[#dcd8cf] text-center space-y-4">
                        <p className="text-[10px] tracking-[0.6em] uppercase text-[#3a3833] font-bold opacity-60">© 2026 CURATED BY @云树CLOUDTREE</p>
                    </footer>
                </div>
            );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
